(()=>{var qs=Object.defineProperty,Ks=Object.defineProperties;var zs=Object.getOwnPropertyDescriptors;var $t=Object.getOwnPropertySymbols;var Ie=Object.prototype.hasOwnProperty,_e=Object.prototype.propertyIsEnumerable;var se=(s,t,e)=>t in s?qs(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e,k=(s,t)=>{for(var e in t||(t={}))Ie.call(t,e)&&se(s,e,t[e]);if($t)for(var e of $t(t))_e.call(t,e)&&se(s,e,t[e]);return s},H=(s,t)=>Ks(s,zs(t));var kt=(s,t)=>{var e={};for(var n in s)Ie.call(s,n)&&t.indexOf(n)<0&&(e[n]=s[n]);if(s!=null&&$t)for(var n of $t(s))t.indexOf(n)<0&&_e.call(s,n)&&(e[n]=s[n]);return e};var F=(s,t,e)=>(se(s,typeof t!="symbol"?t+"":t,e),e);var B=(s,t,e)=>new Promise((n,i)=>{var a=m=>{try{f(e.next(m))}catch(g){i(g)}},u=m=>{try{f(e.throw(m))}catch(g){i(g)}},f=m=>m.done?n(m.value):Promise.resolve(m.value).then(a,u);f((e=e.apply(s,t)).next())});var ne=class{constructor(t,e,n){this.eventTarget=t,this.eventName=e,this.eventOptions=n,this.unorderedBindings=new Set}connect(){this.eventTarget.addEventListener(this.eventName,this,this.eventOptions)}disconnect(){this.eventTarget.removeEventListener(this.eventName,this,this.eventOptions)}bindingConnected(t){this.unorderedBindings.add(t)}bindingDisconnected(t){this.unorderedBindings.delete(t)}handleEvent(t){let e=Ws(t);for(let n of this.bindings){if(e.immediatePropagationStopped)break;n.handleEvent(e)}}hasBindings(){return this.unorderedBindings.size>0}get bindings(){return Array.from(this.unorderedBindings).sort((t,e)=>{let n=t.index,i=e.index;return n<i?-1:n>i?1:0})}};function Ws(s){if("immediatePropagationStopped"in s)return s;{let{stopImmediatePropagation:t}=s;return Object.assign(s,{immediatePropagationStopped:!1,stopImmediatePropagation(){this.immediatePropagationStopped=!0,t.call(this)}})}}var ie=class{constructor(t){this.application=t,this.eventListenerMaps=new Map,this.started=!1}start(){this.started||(this.started=!0,this.eventListeners.forEach(t=>t.connect()))}stop(){this.started&&(this.started=!1,this.eventListeners.forEach(t=>t.disconnect()))}get eventListeners(){return Array.from(this.eventListenerMaps.values()).reduce((t,e)=>t.concat(Array.from(e.values())),[])}bindingConnected(t){this.fetchEventListenerForBinding(t).bindingConnected(t)}bindingDisconnected(t,e=!1){this.fetchEventListenerForBinding(t).bindingDisconnected(t),e&&this.clearEventListenersForBinding(t)}handleError(t,e,n={}){this.application.handleError(t,`Error ${e}`,n)}clearEventListenersForBinding(t){let e=this.fetchEventListenerForBinding(t);e.hasBindings()||(e.disconnect(),this.removeMappedEventListenerFor(t))}removeMappedEventListenerFor(t){let{eventTarget:e,eventName:n,eventOptions:i}=t,a=this.fetchEventListenerMapForEventTarget(e),u=this.cacheKey(n,i);a.delete(u),a.size==0&&this.eventListenerMaps.delete(e)}fetchEventListenerForBinding(t){let{eventTarget:e,eventName:n,eventOptions:i}=t;return this.fetchEventListener(e,n,i)}fetchEventListener(t,e,n){let i=this.fetchEventListenerMapForEventTarget(t),a=this.cacheKey(e,n),u=i.get(a);return u||(u=this.createEventListener(t,e,n),i.set(a,u)),u}createEventListener(t,e,n){let i=new ne(t,e,n);return this.started&&i.connect(),i}fetchEventListenerMapForEventTarget(t){let e=this.eventListenerMaps.get(t);return e||(e=new Map,this.eventListenerMaps.set(t,e)),e}cacheKey(t,e){let n=[t];return Object.keys(e).sort().forEach(i=>{n.push(`${e[i]?"":"!"}${i}`)}),n.join(":")}},Hs={stop({event:s,value:t}){return t&&s.stopPropagation(),!0},prevent({event:s,value:t}){return t&&s.preventDefault(),!0},self({event:s,value:t,element:e}){return t?e===s.target:!0}},Xs=/^(?:(?:([^.]+?)\+)?(.+?)(?:\.(.+?))?(?:@(window|document))?->)?(.+?)(?:#([^:]+?))(?::(.+))?$/;function Js(s){let e=s.trim().match(Xs)||[],n=e[2],i=e[3];return i&&!["keydown","keyup","keypress"].includes(n)&&(n+=`.${i}`,i=""),{eventTarget:Ys(e[4]),eventName:n,eventOptions:e[7]?Qs(e[7]):{},identifier:e[5],methodName:e[6],keyFilter:e[1]||i}}function Ys(s){if(s=="window")return window;if(s=="document")return document}function Qs(s){return s.split(":").reduce((t,e)=>Object.assign(t,{[e.replace(/^!/,"")]:!/^!/.test(e)}),{})}function Gs(s){if(s==window)return"window";if(s==document)return"document"}function Te(s){return s.replace(/(?:[_-])([a-z0-9])/g,(t,e)=>e.toUpperCase())}function re(s){return Te(s.replace(/--/g,"-").replace(/__/g,"_"))}function wt(s){return s.charAt(0).toUpperCase()+s.slice(1)}function Qe(s){return s.replace(/([A-Z])/g,(t,e)=>`-${e.toLowerCase()}`)}function Zs(s){return s.match(/[^\s]+/g)||[]}function Ue(s){return s!=null}function oe(s,t){return Object.prototype.hasOwnProperty.call(s,t)}var qe=["meta","ctrl","alt","shift"],ae=class{constructor(t,e,n,i){this.element=t,this.index=e,this.eventTarget=n.eventTarget||t,this.eventName=n.eventName||tn(t)||Pt("missing event name"),this.eventOptions=n.eventOptions||{},this.identifier=n.identifier||Pt("missing identifier"),this.methodName=n.methodName||Pt("missing method name"),this.keyFilter=n.keyFilter||"",this.schema=i}static forToken(t,e){return new this(t.element,t.index,Js(t.content),e)}toString(){let t=this.keyFilter?`.${this.keyFilter}`:"",e=this.eventTargetName?`@${this.eventTargetName}`:"";return`${this.eventName}${t}${e}->${this.identifier}#${this.methodName}`}shouldIgnoreKeyboardEvent(t){if(!this.keyFilter)return!1;let e=this.keyFilter.split("+");if(this.keyFilterDissatisfied(t,e))return!0;let n=e.filter(i=>!qe.includes(i))[0];return n?(oe(this.keyMappings,n)||Pt(`contains unknown key filter: ${this.keyFilter}`),this.keyMappings[n].toLowerCase()!==t.key.toLowerCase()):!1}shouldIgnoreMouseEvent(t){if(!this.keyFilter)return!1;let e=[this.keyFilter];return!!this.keyFilterDissatisfied(t,e)}get params(){let t={},e=new RegExp(`^data-${this.identifier}-(.+)-param$`,"i");for(let{name:n,value:i}of Array.from(this.element.attributes)){let a=n.match(e),u=a&&a[1];u&&(t[Te(u)]=en(i))}return t}get eventTargetName(){return Gs(this.eventTarget)}get keyMappings(){return this.schema.keyMappings}keyFilterDissatisfied(t,e){let[n,i,a,u]=qe.map(f=>e.includes(f));return t.metaKey!==n||t.ctrlKey!==i||t.altKey!==a||t.shiftKey!==u}},Ke={a:()=>"click",button:()=>"click",form:()=>"submit",details:()=>"toggle",input:s=>s.getAttribute("type")=="submit"?"click":"input",select:()=>"change",textarea:()=>"input"};function tn(s){let t=s.tagName.toLowerCase();if(t in Ke)return Ke[t](s)}function Pt(s){throw new Error(s)}function en(s){try{return JSON.parse(s)}catch(t){return s}}var ce=class{constructor(t,e){this.context=t,this.action=e}get index(){return this.action.index}get eventTarget(){return this.action.eventTarget}get eventOptions(){return this.action.eventOptions}get identifier(){return this.context.identifier}handleEvent(t){let e=this.prepareActionEvent(t);this.willBeInvokedByEvent(t)&&this.applyEventModifiers(e)&&this.invokeWithEvent(e)}get eventName(){return this.action.eventName}get method(){let t=this.controller[this.methodName];if(typeof t=="function")return t;throw new Error(`Action "${this.action}" references undefined method "${this.methodName}"`)}applyEventModifiers(t){let{element:e}=this.action,{actionDescriptorFilters:n}=this.context.application,{controller:i}=this.context,a=!0;for(let[u,f]of Object.entries(this.eventOptions))if(u in n){let m=n[u];a=a&&m({name:u,value:f,event:t,element:e,controller:i})}else continue;return a}prepareActionEvent(t){return Object.assign(t,{params:this.action.params})}invokeWithEvent(t){let{target:e,currentTarget:n}=t;try{this.method.call(this.controller,t),this.context.logDebugActivity(this.methodName,{event:t,target:e,currentTarget:n,action:this.methodName})}catch(i){let{identifier:a,controller:u,element:f,index:m}=this,g={identifier:a,controller:u,element:f,index:m,event:t};this.context.handleError(i,`invoking action "${this.action}"`,g)}}willBeInvokedByEvent(t){let e=t.target;return t instanceof KeyboardEvent&&this.action.shouldIgnoreKeyboardEvent(t)||t instanceof MouseEvent&&this.action.shouldIgnoreMouseEvent(t)?!1:this.element===e?!0:e instanceof Element&&this.element.contains(e)?this.scope.containsElement(e):this.scope.containsElement(this.action.element)}get controller(){return this.context.controller}get methodName(){return this.action.methodName}get element(){return this.scope.element}get scope(){return this.context.scope}},Rt=class{constructor(t,e){this.mutationObserverInit={attributes:!0,childList:!0,subtree:!0},this.element=t,this.started=!1,this.delegate=e,this.elements=new Set,this.mutationObserver=new MutationObserver(n=>this.processMutations(n))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,this.mutationObserverInit),this.refresh())}pause(t){this.started&&(this.mutationObserver.disconnect(),this.started=!1),t(),this.started||(this.mutationObserver.observe(this.element,this.mutationObserverInit),this.started=!0)}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started){let t=new Set(this.matchElementsInTree());for(let e of Array.from(this.elements))t.has(e)||this.removeElement(e);for(let e of Array.from(t))this.addElement(e)}}processMutations(t){if(this.started)for(let e of t)this.processMutation(e)}processMutation(t){t.type=="attributes"?this.processAttributeChange(t.target,t.attributeName):t.type=="childList"&&(this.processRemovedNodes(t.removedNodes),this.processAddedNodes(t.addedNodes))}processAttributeChange(t,e){this.elements.has(t)?this.delegate.elementAttributeChanged&&this.matchElement(t)?this.delegate.elementAttributeChanged(t,e):this.removeElement(t):this.matchElement(t)&&this.addElement(t)}processRemovedNodes(t){for(let e of Array.from(t)){let n=this.elementFromNode(e);n&&this.processTree(n,this.removeElement)}}processAddedNodes(t){for(let e of Array.from(t)){let n=this.elementFromNode(e);n&&this.elementIsActive(n)&&this.processTree(n,this.addElement)}}matchElement(t){return this.delegate.matchElement(t)}matchElementsInTree(t=this.element){return this.delegate.matchElementsInTree(t)}processTree(t,e){for(let n of this.matchElementsInTree(t))e.call(this,n)}elementFromNode(t){if(t.nodeType==Node.ELEMENT_NODE)return t}elementIsActive(t){return t.isConnected!=this.element.isConnected?!1:this.element.contains(t)}addElement(t){this.elements.has(t)||this.elementIsActive(t)&&(this.elements.add(t),this.delegate.elementMatched&&this.delegate.elementMatched(t))}removeElement(t){this.elements.has(t)&&(this.elements.delete(t),this.delegate.elementUnmatched&&this.delegate.elementUnmatched(t))}},Vt=class{constructor(t,e,n){this.attributeName=e,this.delegate=n,this.elementObserver=new Rt(t,this)}get element(){return this.elementObserver.element}get selector(){return`[${this.attributeName}]`}start(){this.elementObserver.start()}pause(t){this.elementObserver.pause(t)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get started(){return this.elementObserver.started}matchElement(t){return t.hasAttribute(this.attributeName)}matchElementsInTree(t){let e=this.matchElement(t)?[t]:[],n=Array.from(t.querySelectorAll(this.selector));return e.concat(n)}elementMatched(t){this.delegate.elementMatchedAttribute&&this.delegate.elementMatchedAttribute(t,this.attributeName)}elementUnmatched(t){this.delegate.elementUnmatchedAttribute&&this.delegate.elementUnmatchedAttribute(t,this.attributeName)}elementAttributeChanged(t,e){this.delegate.elementAttributeValueChanged&&this.attributeName==e&&this.delegate.elementAttributeValueChanged(t,e)}};function sn(s,t,e){Ge(s,t).add(e)}function nn(s,t,e){Ge(s,t).delete(e),rn(s,t)}function Ge(s,t){let e=s.get(t);return e||(e=new Set,s.set(t,e)),e}function rn(s,t){let e=s.get(t);e!=null&&e.size==0&&s.delete(t)}var Q=class{constructor(){this.valuesByKey=new Map}get keys(){return Array.from(this.valuesByKey.keys())}get values(){return Array.from(this.valuesByKey.values()).reduce((e,n)=>e.concat(Array.from(n)),[])}get size(){return Array.from(this.valuesByKey.values()).reduce((e,n)=>e+n.size,0)}add(t,e){sn(this.valuesByKey,t,e)}delete(t,e){nn(this.valuesByKey,t,e)}has(t,e){let n=this.valuesByKey.get(t);return n!=null&&n.has(e)}hasKey(t){return this.valuesByKey.has(t)}hasValue(t){return Array.from(this.valuesByKey.values()).some(n=>n.has(t))}getValuesForKey(t){let e=this.valuesByKey.get(t);return e?Array.from(e):[]}getKeysForValue(t){return Array.from(this.valuesByKey).filter(([e,n])=>n.has(t)).map(([e,n])=>e)}};var le=class{constructor(t,e,n,i){this._selector=e,this.details=i,this.elementObserver=new Rt(t,this),this.delegate=n,this.matchesByElement=new Q}get started(){return this.elementObserver.started}get selector(){return this._selector}set selector(t){this._selector=t,this.refresh()}start(){this.elementObserver.start()}pause(t){this.elementObserver.pause(t)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get element(){return this.elementObserver.element}matchElement(t){let{selector:e}=this;if(e){let n=t.matches(e);return this.delegate.selectorMatchElement?n&&this.delegate.selectorMatchElement(t,this.details):n}else return!1}matchElementsInTree(t){let{selector:e}=this;if(e){let n=this.matchElement(t)?[t]:[],i=Array.from(t.querySelectorAll(e)).filter(a=>this.matchElement(a));return n.concat(i)}else return[]}elementMatched(t){let{selector:e}=this;e&&this.selectorMatched(t,e)}elementUnmatched(t){let e=this.matchesByElement.getKeysForValue(t);for(let n of e)this.selectorUnmatched(t,n)}elementAttributeChanged(t,e){let{selector:n}=this;if(n){let i=this.matchElement(t),a=this.matchesByElement.has(n,t);i&&!a?this.selectorMatched(t,n):!i&&a&&this.selectorUnmatched(t,n)}}selectorMatched(t,e){this.delegate.selectorMatched(t,e,this.details),this.matchesByElement.add(e,t)}selectorUnmatched(t,e){this.delegate.selectorUnmatched(t,e,this.details),this.matchesByElement.delete(e,t)}},ue=class{constructor(t,e){this.element=t,this.delegate=e,this.started=!1,this.stringMap=new Map,this.mutationObserver=new MutationObserver(n=>this.processMutations(n))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,{attributes:!0,attributeOldValue:!0}),this.refresh())}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started)for(let t of this.knownAttributeNames)this.refreshAttribute(t,null)}processMutations(t){if(this.started)for(let e of t)this.processMutation(e)}processMutation(t){let e=t.attributeName;e&&this.refreshAttribute(e,t.oldValue)}refreshAttribute(t,e){let n=this.delegate.getStringMapKeyForAttribute(t);if(n!=null){this.stringMap.has(t)||this.stringMapKeyAdded(n,t);let i=this.element.getAttribute(t);if(this.stringMap.get(t)!=i&&this.stringMapValueChanged(i,n,e),i==null){let a=this.stringMap.get(t);this.stringMap.delete(t),a&&this.stringMapKeyRemoved(n,t,a)}else this.stringMap.set(t,i)}}stringMapKeyAdded(t,e){this.delegate.stringMapKeyAdded&&this.delegate.stringMapKeyAdded(t,e)}stringMapValueChanged(t,e,n){this.delegate.stringMapValueChanged&&this.delegate.stringMapValueChanged(t,e,n)}stringMapKeyRemoved(t,e,n){this.delegate.stringMapKeyRemoved&&this.delegate.stringMapKeyRemoved(t,e,n)}get knownAttributeNames(){return Array.from(new Set(this.currentAttributeNames.concat(this.recordedAttributeNames)))}get currentAttributeNames(){return Array.from(this.element.attributes).map(t=>t.name)}get recordedAttributeNames(){return Array.from(this.stringMap.keys())}},jt=class{constructor(t,e,n){this.attributeObserver=new Vt(t,e,this),this.delegate=n,this.tokensByElement=new Q}get started(){return this.attributeObserver.started}start(){this.attributeObserver.start()}pause(t){this.attributeObserver.pause(t)}stop(){this.attributeObserver.stop()}refresh(){this.attributeObserver.refresh()}get element(){return this.attributeObserver.element}get attributeName(){return this.attributeObserver.attributeName}elementMatchedAttribute(t){this.tokensMatched(this.readTokensForElement(t))}elementAttributeValueChanged(t){let[e,n]=this.refreshTokensForElement(t);this.tokensUnmatched(e),this.tokensMatched(n)}elementUnmatchedAttribute(t){this.tokensUnmatched(this.tokensByElement.getValuesForKey(t))}tokensMatched(t){t.forEach(e=>this.tokenMatched(e))}tokensUnmatched(t){t.forEach(e=>this.tokenUnmatched(e))}tokenMatched(t){this.delegate.tokenMatched(t),this.tokensByElement.add(t.element,t)}tokenUnmatched(t){this.delegate.tokenUnmatched(t),this.tokensByElement.delete(t.element,t)}refreshTokensForElement(t){let e=this.tokensByElement.getValuesForKey(t),n=this.readTokensForElement(t),i=an(e,n).findIndex(([a,u])=>!cn(a,u));return i==-1?[[],[]]:[e.slice(i),n.slice(i)]}readTokensForElement(t){let e=this.attributeName,n=t.getAttribute(e)||"";return on(n,t,e)}};function on(s,t,e){return s.trim().split(/\s+/).filter(n=>n.length).map((n,i)=>({element:t,attributeName:e,content:n,index:i}))}function an(s,t){let e=Math.max(s.length,t.length);return Array.from({length:e},(n,i)=>[s[i],t[i]])}function cn(s,t){return s&&t&&s.index==t.index&&s.content==t.content}var It=class{constructor(t,e,n){this.tokenListObserver=new jt(t,e,this),this.delegate=n,this.parseResultsByToken=new WeakMap,this.valuesByTokenByElement=new WeakMap}get started(){return this.tokenListObserver.started}start(){this.tokenListObserver.start()}stop(){this.tokenListObserver.stop()}refresh(){this.tokenListObserver.refresh()}get element(){return this.tokenListObserver.element}get attributeName(){return this.tokenListObserver.attributeName}tokenMatched(t){let{element:e}=t,{value:n}=this.fetchParseResultForToken(t);n&&(this.fetchValuesByTokenForElement(e).set(t,n),this.delegate.elementMatchedValue(e,n))}tokenUnmatched(t){let{element:e}=t,{value:n}=this.fetchParseResultForToken(t);n&&(this.fetchValuesByTokenForElement(e).delete(t),this.delegate.elementUnmatchedValue(e,n))}fetchParseResultForToken(t){let e=this.parseResultsByToken.get(t);return e||(e=this.parseToken(t),this.parseResultsByToken.set(t,e)),e}fetchValuesByTokenForElement(t){let e=this.valuesByTokenByElement.get(t);return e||(e=new Map,this.valuesByTokenByElement.set(t,e)),e}parseToken(t){try{return{value:this.delegate.parseValueForToken(t)}}catch(e){return{error:e}}}},he=class{constructor(t,e){this.context=t,this.delegate=e,this.bindingsByAction=new Map}start(){this.valueListObserver||(this.valueListObserver=new It(this.element,this.actionAttribute,this),this.valueListObserver.start())}stop(){this.valueListObserver&&(this.valueListObserver.stop(),delete this.valueListObserver,this.disconnectAllActions())}get element(){return this.context.element}get identifier(){return this.context.identifier}get actionAttribute(){return this.schema.actionAttribute}get schema(){return this.context.schema}get bindings(){return Array.from(this.bindingsByAction.values())}connectAction(t){let e=new ce(this.context,t);this.bindingsByAction.set(t,e),this.delegate.bindingConnected(e)}disconnectAction(t){let e=this.bindingsByAction.get(t);e&&(this.bindingsByAction.delete(t),this.delegate.bindingDisconnected(e))}disconnectAllActions(){this.bindings.forEach(t=>this.delegate.bindingDisconnected(t,!0)),this.bindingsByAction.clear()}parseValueForToken(t){let e=ae.forToken(t,this.schema);if(e.identifier==this.identifier)return e}elementMatchedValue(t,e){this.connectAction(e)}elementUnmatchedValue(t,e){this.disconnectAction(e)}},de=class{constructor(t,e){this.context=t,this.receiver=e,this.stringMapObserver=new ue(this.element,this),this.valueDescriptorMap=this.controller.valueDescriptorMap}start(){this.stringMapObserver.start(),this.invokeChangedCallbacksForDefaultValues()}stop(){this.stringMapObserver.stop()}get element(){return this.context.element}get controller(){return this.context.controller}getStringMapKeyForAttribute(t){if(t in this.valueDescriptorMap)return this.valueDescriptorMap[t].name}stringMapKeyAdded(t,e){let n=this.valueDescriptorMap[e];this.hasValue(t)||this.invokeChangedCallback(t,n.writer(this.receiver[t]),n.writer(n.defaultValue))}stringMapValueChanged(t,e,n){let i=this.valueDescriptorNameMap[e];t!==null&&(n===null&&(n=i.writer(i.defaultValue)),this.invokeChangedCallback(e,t,n))}stringMapKeyRemoved(t,e,n){let i=this.valueDescriptorNameMap[t];this.hasValue(t)?this.invokeChangedCallback(t,i.writer(this.receiver[t]),n):this.invokeChangedCallback(t,i.writer(i.defaultValue),n)}invokeChangedCallbacksForDefaultValues(){for(let{key:t,name:e,defaultValue:n,writer:i}of this.valueDescriptors)n!=null&&!this.controller.data.has(t)&&this.invokeChangedCallback(e,i(n),void 0)}invokeChangedCallback(t,e,n){let i=`${t}Changed`,a=this.receiver[i];if(typeof a=="function"){let u=this.valueDescriptorNameMap[t];try{let f=u.reader(e),m=n;n&&(m=u.reader(n)),a.call(this.receiver,f,m)}catch(f){throw f instanceof TypeError&&(f.message=`Stimulus Value "${this.context.identifier}.${u.name}" - ${f.message}`),f}}}get valueDescriptors(){let{valueDescriptorMap:t}=this;return Object.keys(t).map(e=>t[e])}get valueDescriptorNameMap(){let t={};return Object.keys(this.valueDescriptorMap).forEach(e=>{let n=this.valueDescriptorMap[e];t[n.name]=n}),t}hasValue(t){let e=this.valueDescriptorNameMap[t],n=`has${wt(e.name)}`;return this.receiver[n]}},fe=class{constructor(t,e){this.context=t,this.delegate=e,this.targetsByName=new Q}start(){this.tokenListObserver||(this.tokenListObserver=new jt(this.element,this.attributeName,this),this.tokenListObserver.start())}stop(){this.tokenListObserver&&(this.disconnectAllTargets(),this.tokenListObserver.stop(),delete this.tokenListObserver)}tokenMatched({element:t,content:e}){this.scope.containsElement(t)&&this.connectTarget(t,e)}tokenUnmatched({element:t,content:e}){this.disconnectTarget(t,e)}connectTarget(t,e){var n;this.targetsByName.has(e,t)||(this.targetsByName.add(e,t),(n=this.tokenListObserver)===null||n===void 0||n.pause(()=>this.delegate.targetConnected(t,e)))}disconnectTarget(t,e){var n;this.targetsByName.has(e,t)&&(this.targetsByName.delete(e,t),(n=this.tokenListObserver)===null||n===void 0||n.pause(()=>this.delegate.targetDisconnected(t,e)))}disconnectAllTargets(){for(let t of this.targetsByName.keys)for(let e of this.targetsByName.getValuesForKey(t))this.disconnectTarget(e,t)}get attributeName(){return`data-${this.context.identifier}-target`}get element(){return this.context.element}get scope(){return this.context.scope}};function xt(s,t){let e=Ze(s);return Array.from(e.reduce((n,i)=>(un(i,t).forEach(a=>n.add(a)),n),new Set))}function ln(s,t){return Ze(s).reduce((n,i)=>(n.push(...hn(i,t)),n),[])}function Ze(s){let t=[];for(;s;)t.push(s),s=Object.getPrototypeOf(s);return t.reverse()}function un(s,t){let e=s[t];return Array.isArray(e)?e:[]}function hn(s,t){let e=s[t];return e?Object.keys(e).map(n=>[n,e[n]]):[]}var me=class{constructor(t,e){this.started=!1,this.context=t,this.delegate=e,this.outletsByName=new Q,this.outletElementsByName=new Q,this.selectorObserverMap=new Map,this.attributeObserverMap=new Map}start(){this.started||(this.outletDefinitions.forEach(t=>{this.setupSelectorObserverForOutlet(t),this.setupAttributeObserverForOutlet(t)}),this.started=!0,this.dependentContexts.forEach(t=>t.refresh()))}refresh(){this.selectorObserverMap.forEach(t=>t.refresh()),this.attributeObserverMap.forEach(t=>t.refresh())}stop(){this.started&&(this.started=!1,this.disconnectAllOutlets(),this.stopSelectorObservers(),this.stopAttributeObservers())}stopSelectorObservers(){this.selectorObserverMap.size>0&&(this.selectorObserverMap.forEach(t=>t.stop()),this.selectorObserverMap.clear())}stopAttributeObservers(){this.attributeObserverMap.size>0&&(this.attributeObserverMap.forEach(t=>t.stop()),this.attributeObserverMap.clear())}selectorMatched(t,e,{outletName:n}){let i=this.getOutlet(t,n);i&&this.connectOutlet(i,t,n)}selectorUnmatched(t,e,{outletName:n}){let i=this.getOutletFromMap(t,n);i&&this.disconnectOutlet(i,t,n)}selectorMatchElement(t,{outletName:e}){let n=this.selector(e),i=this.hasOutlet(t,e),a=t.matches(`[${this.schema.controllerAttribute}~=${e}]`);return n?i&&a&&t.matches(n):!1}elementMatchedAttribute(t,e){let n=this.getOutletNameFromOutletAttributeName(e);n&&this.updateSelectorObserverForOutlet(n)}elementAttributeValueChanged(t,e){let n=this.getOutletNameFromOutletAttributeName(e);n&&this.updateSelectorObserverForOutlet(n)}elementUnmatchedAttribute(t,e){let n=this.getOutletNameFromOutletAttributeName(e);n&&this.updateSelectorObserverForOutlet(n)}connectOutlet(t,e,n){var i;this.outletElementsByName.has(n,e)||(this.outletsByName.add(n,t),this.outletElementsByName.add(n,e),(i=this.selectorObserverMap.get(n))===null||i===void 0||i.pause(()=>this.delegate.outletConnected(t,e,n)))}disconnectOutlet(t,e,n){var i;this.outletElementsByName.has(n,e)&&(this.outletsByName.delete(n,t),this.outletElementsByName.delete(n,e),(i=this.selectorObserverMap.get(n))===null||i===void 0||i.pause(()=>this.delegate.outletDisconnected(t,e,n)))}disconnectAllOutlets(){for(let t of this.outletElementsByName.keys)for(let e of this.outletElementsByName.getValuesForKey(t))for(let n of this.outletsByName.getValuesForKey(t))this.disconnectOutlet(n,e,t)}updateSelectorObserverForOutlet(t){let e=this.selectorObserverMap.get(t);e&&(e.selector=this.selector(t))}setupSelectorObserverForOutlet(t){let e=this.selector(t),n=new le(document.body,e,this,{outletName:t});this.selectorObserverMap.set(t,n),n.start()}setupAttributeObserverForOutlet(t){let e=this.attributeNameForOutletName(t),n=new Vt(this.scope.element,e,this);this.attributeObserverMap.set(t,n),n.start()}selector(t){return this.scope.outlets.getSelectorForOutletName(t)}attributeNameForOutletName(t){return this.scope.schema.outletAttributeForScope(this.identifier,t)}getOutletNameFromOutletAttributeName(t){return this.outletDefinitions.find(e=>this.attributeNameForOutletName(e)===t)}get outletDependencies(){let t=new Q;return this.router.modules.forEach(e=>{let n=e.definition.controllerConstructor;xt(n,"outlets").forEach(a=>t.add(a,e.identifier))}),t}get outletDefinitions(){return this.outletDependencies.getKeysForValue(this.identifier)}get dependentControllerIdentifiers(){return this.outletDependencies.getValuesForKey(this.identifier)}get dependentContexts(){let t=this.dependentControllerIdentifiers;return this.router.contexts.filter(e=>t.includes(e.identifier))}hasOutlet(t,e){return!!this.getOutlet(t,e)||!!this.getOutletFromMap(t,e)}getOutlet(t,e){return this.application.getControllerForElementAndIdentifier(t,e)}getOutletFromMap(t,e){return this.outletsByName.getValuesForKey(e).find(n=>n.element===t)}get scope(){return this.context.scope}get schema(){return this.context.schema}get identifier(){return this.context.identifier}get application(){return this.context.application}get router(){return this.application.router}},ge=class{constructor(t,e){this.logDebugActivity=(n,i={})=>{let{identifier:a,controller:u,element:f}=this;i=Object.assign({identifier:a,controller:u,element:f},i),this.application.logDebugActivity(this.identifier,n,i)},this.module=t,this.scope=e,this.controller=new t.controllerConstructor(this),this.bindingObserver=new he(this,this.dispatcher),this.valueObserver=new de(this,this.controller),this.targetObserver=new fe(this,this),this.outletObserver=new me(this,this);try{this.controller.initialize(),this.logDebugActivity("initialize")}catch(n){this.handleError(n,"initializing controller")}}connect(){this.bindingObserver.start(),this.valueObserver.start(),this.targetObserver.start(),this.outletObserver.start();try{this.controller.connect(),this.logDebugActivity("connect")}catch(t){this.handleError(t,"connecting controller")}}refresh(){this.outletObserver.refresh()}disconnect(){try{this.controller.disconnect(),this.logDebugActivity("disconnect")}catch(t){this.handleError(t,"disconnecting controller")}this.outletObserver.stop(),this.targetObserver.stop(),this.valueObserver.stop(),this.bindingObserver.stop()}get application(){return this.module.application}get identifier(){return this.module.identifier}get schema(){return this.application.schema}get dispatcher(){return this.application.dispatcher}get element(){return this.scope.element}get parentElement(){return this.element.parentElement}handleError(t,e,n={}){let{identifier:i,controller:a,element:u}=this;n=Object.assign({identifier:i,controller:a,element:u},n),this.application.handleError(t,`Error ${e}`,n)}targetConnected(t,e){this.invokeControllerMethod(`${e}TargetConnected`,t)}targetDisconnected(t,e){this.invokeControllerMethod(`${e}TargetDisconnected`,t)}outletConnected(t,e,n){this.invokeControllerMethod(`${re(n)}OutletConnected`,t,e)}outletDisconnected(t,e,n){this.invokeControllerMethod(`${re(n)}OutletDisconnected`,t,e)}invokeControllerMethod(t,...e){let n=this.controller;typeof n[t]=="function"&&n[t](...e)}};function dn(s){return fn(s,mn(s))}function fn(s,t){let e=vn(s),n=gn(s.prototype,t);return Object.defineProperties(e.prototype,n),e}function mn(s){return xt(s,"blessings").reduce((e,n)=>{let i=n(s);for(let a in i){let u=e[a]||{};e[a]=Object.assign(u,i[a])}return e},{})}function gn(s,t){return bn(t).reduce((e,n)=>{let i=pn(s,t,n);return i&&Object.assign(e,{[n]:i}),e},{})}function pn(s,t,e){let n=Object.getOwnPropertyDescriptor(s,e);if(!(n&&"value"in n)){let a=Object.getOwnPropertyDescriptor(t,e).value;return n&&(a.get=n.get||a.get,a.set=n.set||a.set),a}}var bn=(()=>typeof Object.getOwnPropertySymbols=="function"?s=>[...Object.getOwnPropertyNames(s),...Object.getOwnPropertySymbols(s)]:Object.getOwnPropertyNames)(),vn=(()=>{function s(e){function n(){return Reflect.construct(e,arguments,new.target)}return n.prototype=Object.create(e.prototype,{constructor:{value:n}}),Reflect.setPrototypeOf(n,e),n}function t(){let n=s(function(){this.a.call(this)});return n.prototype.a=function(){},new n}try{return t(),s}catch(e){return n=>class extends n{}}})();function yn(s){return{identifier:s.identifier,controllerConstructor:dn(s.controllerConstructor)}}var pe=class{constructor(t,e){this.application=t,this.definition=yn(e),this.contextsByScope=new WeakMap,this.connectedContexts=new Set}get identifier(){return this.definition.identifier}get controllerConstructor(){return this.definition.controllerConstructor}get contexts(){return Array.from(this.connectedContexts)}connectContextForScope(t){let e=this.fetchContextForScope(t);this.connectedContexts.add(e),e.connect()}disconnectContextForScope(t){let e=this.contextsByScope.get(t);e&&(this.connectedContexts.delete(e),e.disconnect())}fetchContextForScope(t){let e=this.contextsByScope.get(t);return e||(e=new ge(this,t),this.contextsByScope.set(t,e)),e}},be=class{constructor(t){this.scope=t}has(t){return this.data.has(this.getDataKey(t))}get(t){return this.getAll(t)[0]}getAll(t){let e=this.data.get(this.getDataKey(t))||"";return Zs(e)}getAttributeName(t){return this.data.getAttributeNameForKey(this.getDataKey(t))}getDataKey(t){return`${t}-class`}get data(){return this.scope.data}},ve=class{constructor(t){this.scope=t}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get(t){let e=this.getAttributeNameForKey(t);return this.element.getAttribute(e)}set(t,e){let n=this.getAttributeNameForKey(t);return this.element.setAttribute(n,e),this.get(t)}has(t){let e=this.getAttributeNameForKey(t);return this.element.hasAttribute(e)}delete(t){if(this.has(t)){let e=this.getAttributeNameForKey(t);return this.element.removeAttribute(e),!0}else return!1}getAttributeNameForKey(t){return`data-${this.identifier}-${Qe(t)}`}},ye=class{constructor(t){this.warnedKeysByObject=new WeakMap,this.logger=t}warn(t,e,n){let i=this.warnedKeysByObject.get(t);i||(i=new Set,this.warnedKeysByObject.set(t,i)),i.has(e)||(i.add(e),this.logger.warn(n,t))}};function we(s,t){return`[${s}~="${t}"]`}var xe=class{constructor(t){this.scope=t}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(t){return this.find(t)!=null}find(...t){return t.reduce((e,n)=>e||this.findTarget(n)||this.findLegacyTarget(n),void 0)}findAll(...t){return t.reduce((e,n)=>[...e,...this.findAllTargets(n),...this.findAllLegacyTargets(n)],[])}findTarget(t){let e=this.getSelectorForTargetName(t);return this.scope.findElement(e)}findAllTargets(t){let e=this.getSelectorForTargetName(t);return this.scope.findAllElements(e)}getSelectorForTargetName(t){let e=this.schema.targetAttributeForScope(this.identifier);return we(e,t)}findLegacyTarget(t){let e=this.getLegacySelectorForTargetName(t);return this.deprecate(this.scope.findElement(e),t)}findAllLegacyTargets(t){let e=this.getLegacySelectorForTargetName(t);return this.scope.findAllElements(e).map(n=>this.deprecate(n,t))}getLegacySelectorForTargetName(t){let e=`${this.identifier}.${t}`;return we(this.schema.targetAttribute,e)}deprecate(t,e){if(t){let{identifier:n}=this,i=this.schema.targetAttribute,a=this.schema.targetAttributeForScope(n);this.guide.warn(t,`target:${e}`,`Please replace ${i}="${n}.${e}" with ${a}="${e}". The ${i} attribute is deprecated and will be removed in a future version of Stimulus.`)}return t}get guide(){return this.scope.guide}},Ee=class{constructor(t,e){this.scope=t,this.controllerElement=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(t){return this.find(t)!=null}find(...t){return t.reduce((e,n)=>e||this.findOutlet(n),void 0)}findAll(...t){return t.reduce((e,n)=>[...e,...this.findAllOutlets(n)],[])}getSelectorForOutletName(t){let e=this.schema.outletAttributeForScope(this.identifier,t);return this.controllerElement.getAttribute(e)}findOutlet(t){let e=this.getSelectorForOutletName(t);if(e)return this.findElement(e,t)}findAllOutlets(t){let e=this.getSelectorForOutletName(t);return e?this.findAllElements(e,t):[]}findElement(t,e){return this.scope.queryElements(t).filter(i=>this.matchesElement(i,t,e))[0]}findAllElements(t,e){return this.scope.queryElements(t).filter(i=>this.matchesElement(i,t,e))}matchesElement(t,e,n){let i=t.getAttribute(this.scope.schema.controllerAttribute)||"";return t.matches(e)&&i.split(" ").includes(n)}},vt=class{constructor(t,e,n,i){this.targets=new xe(this),this.classes=new be(this),this.data=new ve(this),this.containsElement=a=>a.closest(this.controllerSelector)===this.element,this.schema=t,this.element=e,this.identifier=n,this.guide=new ye(i),this.outlets=new Ee(this.documentScope,e)}findElement(t){return this.element.matches(t)?this.element:this.queryElements(t).find(this.containsElement)}findAllElements(t){return[...this.element.matches(t)?[this.element]:[],...this.queryElements(t).filter(this.containsElement)]}queryElements(t){return Array.from(this.element.querySelectorAll(t))}get controllerSelector(){return we(this.schema.controllerAttribute,this.identifier)}get isDocumentScope(){return this.element===document.documentElement}get documentScope(){return this.isDocumentScope?this:new vt(this.schema,document.documentElement,this.identifier,this.guide.logger)}},Ae=class{constructor(t,e,n){this.element=t,this.schema=e,this.delegate=n,this.valueListObserver=new It(this.element,this.controllerAttribute,this),this.scopesByIdentifierByElement=new WeakMap,this.scopeReferenceCounts=new WeakMap}start(){this.valueListObserver.start()}stop(){this.valueListObserver.stop()}get controllerAttribute(){return this.schema.controllerAttribute}parseValueForToken(t){let{element:e,content:n}=t;return this.parseValueForElementAndIdentifier(e,n)}parseValueForElementAndIdentifier(t,e){let n=this.fetchScopesByIdentifierForElement(t),i=n.get(e);return i||(i=this.delegate.createScopeForElementAndIdentifier(t,e),n.set(e,i)),i}elementMatchedValue(t,e){let n=(this.scopeReferenceCounts.get(e)||0)+1;this.scopeReferenceCounts.set(e,n),n==1&&this.delegate.scopeConnected(e)}elementUnmatchedValue(t,e){let n=this.scopeReferenceCounts.get(e);n&&(this.scopeReferenceCounts.set(e,n-1),n==1&&this.delegate.scopeDisconnected(e))}fetchScopesByIdentifierForElement(t){let e=this.scopesByIdentifierByElement.get(t);return e||(e=new Map,this.scopesByIdentifierByElement.set(t,e)),e}},Oe=class{constructor(t){this.application=t,this.scopeObserver=new Ae(this.element,this.schema,this),this.scopesByIdentifier=new Q,this.modulesByIdentifier=new Map}get element(){return this.application.element}get schema(){return this.application.schema}get logger(){return this.application.logger}get controllerAttribute(){return this.schema.controllerAttribute}get modules(){return Array.from(this.modulesByIdentifier.values())}get contexts(){return this.modules.reduce((t,e)=>t.concat(e.contexts),[])}start(){this.scopeObserver.start()}stop(){this.scopeObserver.stop()}loadDefinition(t){this.unloadIdentifier(t.identifier);let e=new pe(this.application,t);this.connectModule(e);let n=t.controllerConstructor.afterLoad;n&&n.call(t.controllerConstructor,t.identifier,this.application)}unloadIdentifier(t){let e=this.modulesByIdentifier.get(t);e&&this.disconnectModule(e)}getContextForElementAndIdentifier(t,e){let n=this.modulesByIdentifier.get(e);if(n)return n.contexts.find(i=>i.element==t)}proposeToConnectScopeForElementAndIdentifier(t,e){let n=this.scopeObserver.parseValueForElementAndIdentifier(t,e);n?this.scopeObserver.elementMatchedValue(n.element,n):console.error(`Couldn't find or create scope for identifier: "${e}" and element:`,t)}handleError(t,e,n){this.application.handleError(t,e,n)}createScopeForElementAndIdentifier(t,e){return new vt(this.schema,t,e,this.logger)}scopeConnected(t){this.scopesByIdentifier.add(t.identifier,t);let e=this.modulesByIdentifier.get(t.identifier);e&&e.connectContextForScope(t)}scopeDisconnected(t){this.scopesByIdentifier.delete(t.identifier,t);let e=this.modulesByIdentifier.get(t.identifier);e&&e.disconnectContextForScope(t)}connectModule(t){this.modulesByIdentifier.set(t.identifier,t),this.scopesByIdentifier.getValuesForKey(t.identifier).forEach(n=>t.connectContextForScope(n))}disconnectModule(t){this.modulesByIdentifier.delete(t.identifier),this.scopesByIdentifier.getValuesForKey(t.identifier).forEach(n=>t.disconnectContextForScope(n))}},wn={controllerAttribute:"data-controller",actionAttribute:"data-action",targetAttribute:"data-target",targetAttributeForScope:s=>`data-${s}-target`,outletAttributeForScope:(s,t)=>`data-${s}-${t}-outlet`,keyMappings:Object.assign(Object.assign({enter:"Enter",tab:"Tab",esc:"Escape",space:" ",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",home:"Home",end:"End",page_up:"PageUp",page_down:"PageDown"},ze("abcdefghijklmnopqrstuvwxyz".split("").map(s=>[s,s]))),ze("0123456789".split("").map(s=>[s,s])))};function ze(s){return s.reduce((t,[e,n])=>Object.assign(Object.assign({},t),{[e]:n}),{})}var _t=class{constructor(t=document.documentElement,e=wn){this.logger=console,this.debug=!1,this.logDebugActivity=(n,i,a={})=>{this.debug&&this.logFormattedMessage(n,i,a)},this.element=t,this.schema=e,this.dispatcher=new ie(this),this.router=new Oe(this),this.actionDescriptorFilters=Object.assign({},Hs)}static start(t,e){let n=new this(t,e);return n.start(),n}start(){return B(this,null,function*(){yield xn(),this.logDebugActivity("application","starting"),this.dispatcher.start(),this.router.start(),this.logDebugActivity("application","start")})}stop(){this.logDebugActivity("application","stopping"),this.dispatcher.stop(),this.router.stop(),this.logDebugActivity("application","stop")}register(t,e){this.load({identifier:t,controllerConstructor:e})}registerActionOption(t,e){this.actionDescriptorFilters[t]=e}load(t,...e){(Array.isArray(t)?t:[t,...e]).forEach(i=>{i.controllerConstructor.shouldLoad&&this.router.loadDefinition(i)})}unload(t,...e){(Array.isArray(t)?t:[t,...e]).forEach(i=>this.router.unloadIdentifier(i))}get controllers(){return this.router.contexts.map(t=>t.controller)}getControllerForElementAndIdentifier(t,e){let n=this.router.getContextForElementAndIdentifier(t,e);return n?n.controller:null}handleError(t,e,n){var i;this.logger.error(`%s

%o

%o`,e,t,n),(i=window.onerror)===null||i===void 0||i.call(window,e,"",0,0,t)}logFormattedMessage(t,e,n={}){n=Object.assign({application:this},n),this.logger.groupCollapsed(`${t} #${e}`),this.logger.log("details:",Object.assign({},n)),this.logger.groupEnd()}};function xn(){return new Promise(s=>{document.readyState=="loading"?document.addEventListener("DOMContentLoaded",()=>s()):s()})}function En(s){return xt(s,"classes").reduce((e,n)=>Object.assign(e,An(n)),{})}function An(s){return{[`${s}Class`]:{get(){let{classes:t}=this;if(t.has(s))return t.get(s);{let e=t.getAttributeName(s);throw new Error(`Missing attribute "${e}"`)}}},[`${s}Classes`]:{get(){return this.classes.getAll(s)}},[`has${wt(s)}Class`]:{get(){return this.classes.has(s)}}}}function On(s){return xt(s,"outlets").reduce((e,n)=>Object.assign(e,Tn(n)),{})}function We(s,t,e){return s.application.getControllerForElementAndIdentifier(t,e)}function He(s,t,e){let n=We(s,t,e);if(n||(s.application.router.proposeToConnectScopeForElementAndIdentifier(t,e),n=We(s,t,e),n))return n}function Tn(s){let t=re(s);return{[`${t}Outlet`]:{get(){let e=this.outlets.find(s),n=this.outlets.getSelectorForOutletName(s);if(e){let i=He(this,e,s);if(i)return i;throw new Error(`The provided outlet element is missing an outlet controller "${s}" instance for host controller "${this.identifier}"`)}throw new Error(`Missing outlet element "${s}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${n}".`)}},[`${t}Outlets`]:{get(){let e=this.outlets.findAll(s);return e.length>0?e.map(n=>{let i=He(this,n,s);if(i)return i;console.warn(`The provided outlet element is missing an outlet controller "${s}" instance for host controller "${this.identifier}"`,n)}).filter(n=>n):[]}},[`${t}OutletElement`]:{get(){let e=this.outlets.find(s),n=this.outlets.getSelectorForOutletName(s);if(e)return e;throw new Error(`Missing outlet element "${s}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${n}".`)}},[`${t}OutletElements`]:{get(){return this.outlets.findAll(s)}},[`has${wt(t)}Outlet`]:{get(){return this.outlets.has(s)}}}}function Cn(s){return xt(s,"targets").reduce((e,n)=>Object.assign(e,Sn(n)),{})}function Sn(s){return{[`${s}Target`]:{get(){let t=this.targets.find(s);if(t)return t;throw new Error(`Missing target element "${s}" for "${this.identifier}" controller`)}},[`${s}Targets`]:{get(){return this.targets.findAll(s)}},[`has${wt(s)}Target`]:{get(){return this.targets.has(s)}}}}function Fn(s){let t=ln(s,"values"),e={valueDescriptorMap:{get(){return t.reduce((n,i)=>{let a=ts(i,this.identifier),u=this.data.getAttributeNameForKey(a.key);return Object.assign(n,{[u]:a})},{})}}};return t.reduce((n,i)=>Object.assign(n,Ln(i)),e)}function Ln(s,t){let e=ts(s,t),{key:n,name:i,reader:a,writer:u}=e;return{[i]:{get(){let f=this.data.get(n);return f!==null?a(f):e.defaultValue},set(f){f===void 0?this.data.delete(n):this.data.set(n,u(f))}},[`has${wt(i)}`]:{get(){return this.data.has(n)||e.hasCustomDefaultValue}}}}function ts([s,t],e){return Nn({controller:e,token:s,typeDefinition:t})}function Ut(s){switch(s){case Array:return"array";case Boolean:return"boolean";case Number:return"number";case Object:return"object";case String:return"string"}}function yt(s){switch(typeof s){case"boolean":return"boolean";case"number":return"number";case"string":return"string"}if(Array.isArray(s))return"array";if(Object.prototype.toString.call(s)==="[object Object]")return"object"}function Mn(s){let{controller:t,token:e,typeObject:n}=s,i=Ue(n.type),a=Ue(n.default),u=i&&a,f=i&&!a,m=!i&&a,g=Ut(n.type),b=yt(s.typeObject.default);if(f)return g;if(m)return b;if(g!==b){let p=t?`${t}.${e}`:e;throw new Error(`The specified default value for the Stimulus Value "${p}" must match the defined type "${g}". The provided default value of "${n.default}" is of type "${b}".`)}if(u)return g}function Bn(s){let{controller:t,token:e,typeDefinition:n}=s,a=Mn({controller:t,token:e,typeObject:n}),u=yt(n),f=Ut(n),m=a||u||f;if(m)return m;let g=t?`${t}.${n}`:e;throw new Error(`Unknown value type "${g}" for "${e}" value`)}function Dn(s){let t=Ut(s);if(t)return Xe[t];let e=oe(s,"default"),n=oe(s,"type"),i=s;if(e)return i.default;if(n){let{type:a}=i,u=Ut(a);if(u)return Xe[u]}return s}function Nn(s){let{token:t,typeDefinition:e}=s,n=`${Qe(t)}-value`,i=Bn(s);return{type:i,key:n,name:Te(n),get defaultValue(){return Dn(e)},get hasCustomDefaultValue(){return yt(e)!==void 0},reader:$n[i],writer:Je[i]||Je.default}}var Xe={get array(){return[]},boolean:!1,number:0,get object(){return{}},string:""},$n={array(s){let t=JSON.parse(s);if(!Array.isArray(t))throw new TypeError(`expected value of type "array" but instead got value "${s}" of type "${yt(t)}"`);return t},boolean(s){return!(s=="0"||String(s).toLowerCase()=="false")},number(s){return Number(s.replace(/_/g,""))},object(s){let t=JSON.parse(s);if(t===null||typeof t!="object"||Array.isArray(t))throw new TypeError(`expected value of type "object" but instead got value "${s}" of type "${yt(t)}"`);return t},string(s){return s}},Je={default:kn,array:Ye,object:Ye};function Ye(s){return JSON.stringify(s)}function kn(s){return`${s}`}var O=class{constructor(t){this.context=t}static get shouldLoad(){return!0}static afterLoad(t,e){}get application(){return this.context.application}get scope(){return this.context.scope}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get targets(){return this.scope.targets}get outlets(){return this.scope.outlets}get classes(){return this.scope.classes}get data(){return this.scope.data}initialize(){}connect(){}disconnect(){}dispatch(t,{target:e=this.element,detail:n={},prefix:i=this.identifier,bubbles:a=!0,cancelable:u=!0}={}){let f=i?`${i}:${t}`:t,m=new CustomEvent(f,{detail:n,bubbles:a,cancelable:u});return e.dispatchEvent(m),m}};O.blessings=[En,Cn,Fn,On];O.targets=[];O.outlets=[];O.values={};var ns={exports:{}};(function(s,t){(function(e){s.exports=e()})(function(e){var n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function i(d,h){var o=d[0],r=d[1],c=d[2],l=d[3];o+=(r&c|~r&l)+h[0]-680876936|0,o=(o<<7|o>>>25)+r|0,l+=(o&r|~o&c)+h[1]-389564586|0,l=(l<<12|l>>>20)+o|0,c+=(l&o|~l&r)+h[2]+606105819|0,c=(c<<17|c>>>15)+l|0,r+=(c&l|~c&o)+h[3]-1044525330|0,r=(r<<22|r>>>10)+c|0,o+=(r&c|~r&l)+h[4]-176418897|0,o=(o<<7|o>>>25)+r|0,l+=(o&r|~o&c)+h[5]+1200080426|0,l=(l<<12|l>>>20)+o|0,c+=(l&o|~l&r)+h[6]-1473231341|0,c=(c<<17|c>>>15)+l|0,r+=(c&l|~c&o)+h[7]-45705983|0,r=(r<<22|r>>>10)+c|0,o+=(r&c|~r&l)+h[8]+1770035416|0,o=(o<<7|o>>>25)+r|0,l+=(o&r|~o&c)+h[9]-1958414417|0,l=(l<<12|l>>>20)+o|0,c+=(l&o|~l&r)+h[10]-42063|0,c=(c<<17|c>>>15)+l|0,r+=(c&l|~c&o)+h[11]-1990404162|0,r=(r<<22|r>>>10)+c|0,o+=(r&c|~r&l)+h[12]+1804603682|0,o=(o<<7|o>>>25)+r|0,l+=(o&r|~o&c)+h[13]-40341101|0,l=(l<<12|l>>>20)+o|0,c+=(l&o|~l&r)+h[14]-1502002290|0,c=(c<<17|c>>>15)+l|0,r+=(c&l|~c&o)+h[15]+1236535329|0,r=(r<<22|r>>>10)+c|0,o+=(r&l|c&~l)+h[1]-165796510|0,o=(o<<5|o>>>27)+r|0,l+=(o&c|r&~c)+h[6]-1069501632|0,l=(l<<9|l>>>23)+o|0,c+=(l&r|o&~r)+h[11]+643717713|0,c=(c<<14|c>>>18)+l|0,r+=(c&o|l&~o)+h[0]-373897302|0,r=(r<<20|r>>>12)+c|0,o+=(r&l|c&~l)+h[5]-701558691|0,o=(o<<5|o>>>27)+r|0,l+=(o&c|r&~c)+h[10]+38016083|0,l=(l<<9|l>>>23)+o|0,c+=(l&r|o&~r)+h[15]-660478335|0,c=(c<<14|c>>>18)+l|0,r+=(c&o|l&~o)+h[4]-405537848|0,r=(r<<20|r>>>12)+c|0,o+=(r&l|c&~l)+h[9]+568446438|0,o=(o<<5|o>>>27)+r|0,l+=(o&c|r&~c)+h[14]-1019803690|0,l=(l<<9|l>>>23)+o|0,c+=(l&r|o&~r)+h[3]-187363961|0,c=(c<<14|c>>>18)+l|0,r+=(c&o|l&~o)+h[8]+1163531501|0,r=(r<<20|r>>>12)+c|0,o+=(r&l|c&~l)+h[13]-1444681467|0,o=(o<<5|o>>>27)+r|0,l+=(o&c|r&~c)+h[2]-51403784|0,l=(l<<9|l>>>23)+o|0,c+=(l&r|o&~r)+h[7]+1735328473|0,c=(c<<14|c>>>18)+l|0,r+=(c&o|l&~o)+h[12]-1926607734|0,r=(r<<20|r>>>12)+c|0,o+=(r^c^l)+h[5]-378558|0,o=(o<<4|o>>>28)+r|0,l+=(o^r^c)+h[8]-2022574463|0,l=(l<<11|l>>>21)+o|0,c+=(l^o^r)+h[11]+1839030562|0,c=(c<<16|c>>>16)+l|0,r+=(c^l^o)+h[14]-35309556|0,r=(r<<23|r>>>9)+c|0,o+=(r^c^l)+h[1]-1530992060|0,o=(o<<4|o>>>28)+r|0,l+=(o^r^c)+h[4]+1272893353|0,l=(l<<11|l>>>21)+o|0,c+=(l^o^r)+h[7]-155497632|0,c=(c<<16|c>>>16)+l|0,r+=(c^l^o)+h[10]-1094730640|0,r=(r<<23|r>>>9)+c|0,o+=(r^c^l)+h[13]+681279174|0,o=(o<<4|o>>>28)+r|0,l+=(o^r^c)+h[0]-358537222|0,l=(l<<11|l>>>21)+o|0,c+=(l^o^r)+h[3]-722521979|0,c=(c<<16|c>>>16)+l|0,r+=(c^l^o)+h[6]+76029189|0,r=(r<<23|r>>>9)+c|0,o+=(r^c^l)+h[9]-640364487|0,o=(o<<4|o>>>28)+r|0,l+=(o^r^c)+h[12]-421815835|0,l=(l<<11|l>>>21)+o|0,c+=(l^o^r)+h[15]+530742520|0,c=(c<<16|c>>>16)+l|0,r+=(c^l^o)+h[2]-995338651|0,r=(r<<23|r>>>9)+c|0,o+=(c^(r|~l))+h[0]-198630844|0,o=(o<<6|o>>>26)+r|0,l+=(r^(o|~c))+h[7]+1126891415|0,l=(l<<10|l>>>22)+o|0,c+=(o^(l|~r))+h[14]-1416354905|0,c=(c<<15|c>>>17)+l|0,r+=(l^(c|~o))+h[5]-57434055|0,r=(r<<21|r>>>11)+c|0,o+=(c^(r|~l))+h[12]+1700485571|0,o=(o<<6|o>>>26)+r|0,l+=(r^(o|~c))+h[3]-1894986606|0,l=(l<<10|l>>>22)+o|0,c+=(o^(l|~r))+h[10]-1051523|0,c=(c<<15|c>>>17)+l|0,r+=(l^(c|~o))+h[1]-2054922799|0,r=(r<<21|r>>>11)+c|0,o+=(c^(r|~l))+h[8]+1873313359|0,o=(o<<6|o>>>26)+r|0,l+=(r^(o|~c))+h[15]-30611744|0,l=(l<<10|l>>>22)+o|0,c+=(o^(l|~r))+h[6]-1560198380|0,c=(c<<15|c>>>17)+l|0,r+=(l^(c|~o))+h[13]+1309151649|0,r=(r<<21|r>>>11)+c|0,o+=(c^(r|~l))+h[4]-145523070|0,o=(o<<6|o>>>26)+r|0,l+=(r^(o|~c))+h[11]-1120210379|0,l=(l<<10|l>>>22)+o|0,c+=(o^(l|~r))+h[2]+718787259|0,c=(c<<15|c>>>17)+l|0,r+=(l^(c|~o))+h[9]-343485551|0,r=(r<<21|r>>>11)+c|0,d[0]=o+d[0]|0,d[1]=r+d[1]|0,d[2]=c+d[2]|0,d[3]=l+d[3]|0}function a(d){var h=[],o;for(o=0;o<64;o+=4)h[o>>2]=d.charCodeAt(o)+(d.charCodeAt(o+1)<<8)+(d.charCodeAt(o+2)<<16)+(d.charCodeAt(o+3)<<24);return h}function u(d){var h=[],o;for(o=0;o<64;o+=4)h[o>>2]=d[o]+(d[o+1]<<8)+(d[o+2]<<16)+(d[o+3]<<24);return h}function f(d){var h=d.length,o=[1732584193,-271733879,-1732584194,271733878],r,c,l,T,C,A;for(r=64;r<=h;r+=64)i(o,a(d.substring(r-64,r)));for(d=d.substring(r-64),c=d.length,l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r=0;r<c;r+=1)l[r>>2]|=d.charCodeAt(r)<<(r%4<<3);if(l[r>>2]|=128<<(r%4<<3),r>55)for(i(o,l),r=0;r<16;r+=1)l[r]=0;return T=h*8,T=T.toString(16).match(/(.*?)(.{0,8})$/),C=parseInt(T[2],16),A=parseInt(T[1],16)||0,l[14]=C,l[15]=A,i(o,l),o}function m(d){var h=d.length,o=[1732584193,-271733879,-1732584194,271733878],r,c,l,T,C,A;for(r=64;r<=h;r+=64)i(o,u(d.subarray(r-64,r)));for(d=r-64<h?d.subarray(r-64):new Uint8Array(0),c=d.length,l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r=0;r<c;r+=1)l[r>>2]|=d[r]<<(r%4<<3);if(l[r>>2]|=128<<(r%4<<3),r>55)for(i(o,l),r=0;r<16;r+=1)l[r]=0;return T=h*8,T=T.toString(16).match(/(.*?)(.{0,8})$/),C=parseInt(T[2],16),A=parseInt(T[1],16)||0,l[14]=C,l[15]=A,i(o,l),o}function g(d){var h="",o;for(o=0;o<4;o+=1)h+=n[d>>o*8+4&15]+n[d>>o*8&15];return h}function b(d){var h;for(h=0;h<d.length;h+=1)d[h]=g(d[h]);return d.join("")}b(f("hello")),typeof ArrayBuffer!="undefined"&&!ArrayBuffer.prototype.slice&&function(){function d(h,o){return h=h|0||0,h<0?Math.max(h+o,0):Math.min(h,o)}ArrayBuffer.prototype.slice=function(h,o){var r=this.byteLength,c=d(h,r),l=r,T,C,A,S;return o!==e&&(l=d(o,r)),c>l?new ArrayBuffer(0):(T=l-c,C=new ArrayBuffer(T),A=new Uint8Array(C),S=new Uint8Array(this,c,T),A.set(S),C)}}();function p(d){return/[\u0080-\uFFFF]/.test(d)&&(d=unescape(encodeURIComponent(d))),d}function w(d,h){var o=d.length,r=new ArrayBuffer(o),c=new Uint8Array(r),l;for(l=0;l<o;l+=1)c[l]=d.charCodeAt(l);return h?c:r}function v(d){return String.fromCharCode.apply(null,new Uint8Array(d))}function x(d,h,o){var r=new Uint8Array(d.byteLength+h.byteLength);return r.set(new Uint8Array(d)),r.set(new Uint8Array(h),d.byteLength),o?r:r.buffer}function E(d){var h=[],o=d.length,r;for(r=0;r<o-1;r+=2)h.push(parseInt(d.substr(r,2),16));return String.fromCharCode.apply(String,h)}function y(){this.reset()}return y.prototype.append=function(d){return this.appendBinary(p(d)),this},y.prototype.appendBinary=function(d){this._buff+=d,this._length+=d.length;var h=this._buff.length,o;for(o=64;o<=h;o+=64)i(this._hash,a(this._buff.substring(o-64,o)));return this._buff=this._buff.substring(o-64),this},y.prototype.end=function(d){var h=this._buff,o=h.length,r,c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l;for(r=0;r<o;r+=1)c[r>>2]|=h.charCodeAt(r)<<(r%4<<3);return this._finish(c,o),l=b(this._hash),d&&(l=E(l)),this.reset(),l},y.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},y.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},y.prototype.setState=function(d){return this._buff=d.buff,this._length=d.length,this._hash=d.hash,this},y.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},y.prototype._finish=function(d,h){var o=h,r,c,l;if(d[o>>2]|=128<<(o%4<<3),o>55)for(i(this._hash,d),o=0;o<16;o+=1)d[o]=0;r=this._length*8,r=r.toString(16).match(/(.*?)(.{0,8})$/),c=parseInt(r[2],16),l=parseInt(r[1],16)||0,d[14]=c,d[15]=l,i(this._hash,d)},y.hash=function(d,h){return y.hashBinary(p(d),h)},y.hashBinary=function(d,h){var o=f(d),r=b(o);return h?E(r):r},y.ArrayBuffer=function(){this.reset()},y.ArrayBuffer.prototype.append=function(d){var h=x(this._buff.buffer,d,!0),o=h.length,r;for(this._length+=d.byteLength,r=64;r<=o;r+=64)i(this._hash,u(h.subarray(r-64,r)));return this._buff=r-64<o?new Uint8Array(h.buffer.slice(r-64)):new Uint8Array(0),this},y.ArrayBuffer.prototype.end=function(d){var h=this._buff,o=h.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],c,l;for(c=0;c<o;c+=1)r[c>>2]|=h[c]<<(c%4<<3);return this._finish(r,o),l=b(this._hash),d&&(l=E(l)),this.reset(),l},y.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},y.ArrayBuffer.prototype.getState=function(){var d=y.prototype.getState.call(this);return d.buff=v(d.buff),d},y.ArrayBuffer.prototype.setState=function(d){return d.buff=w(d.buff,!0),y.prototype.setState.call(this,d)},y.ArrayBuffer.prototype.destroy=y.prototype.destroy,y.ArrayBuffer.prototype._finish=y.prototype._finish,y.ArrayBuffer.hash=function(d,h){var o=m(new Uint8Array(d)),r=b(o);return h?E(r):r},y})})(ns);var Pn=ns.exports,Rn=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice,Et=class{static create(t,e){new Et(t).create(e)}constructor(t){this.file=t,this.chunkSize=2097152,this.chunkCount=Math.ceil(this.file.size/this.chunkSize),this.chunkIndex=0}create(t){this.callback=t,this.md5Buffer=new Pn.ArrayBuffer,this.fileReader=new FileReader,this.fileReader.addEventListener("load",e=>this.fileReaderDidLoad(e)),this.fileReader.addEventListener("error",e=>this.fileReaderDidError(e)),this.readNextChunk()}fileReaderDidLoad(t){if(this.md5Buffer.append(t.target.result),!this.readNextChunk()){let e=this.md5Buffer.end(!0),n=btoa(e);this.callback(null,n)}}fileReaderDidError(t){this.callback(`Error reading ${this.file.name}`)}readNextChunk(){if(this.chunkIndex<this.chunkCount||this.chunkIndex==0&&this.chunkCount==0){let t=this.chunkIndex*this.chunkSize,e=Math.min(t+this.chunkSize,this.file.size),n=Rn.call(this.file,t,e);return this.fileReader.readAsArrayBuffer(n),this.chunkIndex++,!0}else return!1}};function Vn(s){let t=is(document.head,`meta[name="${s}"]`);if(t)return t.getAttribute("content")}function jn(s,t){typeof s=="string"&&(t=s,s=document);let e=s.querySelectorAll(t);return os(e)}function is(s,t){return typeof s=="string"&&(t=s,s=document),s.querySelector(t)}function rs(s,t,e={}){let{disabled:n}=s,{bubbles:i,cancelable:a,detail:u}=e,f=document.createEvent("Event");f.initEvent(t,i||!0,a||!0),f.detail=u||{};try{s.disabled=!1,s.dispatchEvent(f)}finally{s.disabled=n}return f}function os(s){return Array.isArray(s)?s:Array.from?Array.from(s):[].slice.call(s)}var Se=class{constructor(t,e,n,i={}){this.file=t,this.attributes={filename:t.name,content_type:t.type||"application/octet-stream",byte_size:t.size,checksum:e},this.xhr=new XMLHttpRequest,this.xhr.open("POST",n,!0),this.xhr.responseType="json",this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.setRequestHeader("Accept","application/json"),this.xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(i).forEach(u=>{this.xhr.setRequestHeader(u,i[u])});let a=Vn("csrf-token");a!=null&&this.xhr.setRequestHeader("X-CSRF-Token",a),this.xhr.addEventListener("load",u=>this.requestDidLoad(u)),this.xhr.addEventListener("error",u=>this.requestDidError(u))}get status(){return this.xhr.status}get response(){let{responseType:t,response:e}=this.xhr;return t=="json"?e:JSON.parse(e)}create(t){this.callback=t,this.xhr.send(JSON.stringify({blob:this.attributes}))}requestDidLoad(t){if(this.status>=200&&this.status<300){let{response:e}=this,{direct_upload:n}=e;delete e.direct_upload,this.attributes=e,this.directUploadData=n,this.callback(null,this.toJSON())}else this.requestDidError(t)}requestDidError(t){this.callback(`Error creating Blob for "${this.file.name}". Status: ${this.status}`)}toJSON(){let t={};for(let e in this.attributes)t[e]=this.attributes[e];return t}},Fe=class{constructor(t){this.blob=t,this.file=t.file;let{url:e,headers:n}=t.directUploadData;this.xhr=new XMLHttpRequest,this.xhr.open("PUT",e,!0),this.xhr.responseType="text";for(let i in n)this.xhr.setRequestHeader(i,n[i]);this.xhr.addEventListener("load",i=>this.requestDidLoad(i)),this.xhr.addEventListener("error",i=>this.requestDidError(i))}create(t){this.callback=t,this.xhr.send(this.file.slice())}requestDidLoad(t){let{status:e,response:n}=this.xhr;e>=200&&e<300?this.callback(null,n):this.requestDidError(t)}requestDidError(t){this.callback(`Error storing "${this.file.name}". Status: ${this.xhr.status}`)}},In=0,At=class{constructor(t,e,n,i={}){this.id=++In,this.file=t,this.url=e,this.delegate=n,this.customHeaders=i}create(t){Et.create(this.file,(e,n)=>{if(e){t(e);return}let i=new Se(this.file,n,this.url,this.customHeaders);es(this.delegate,"directUploadWillCreateBlobWithXHR",i.xhr),i.create(a=>{if(a)t(a);else{let u=new Fe(i);es(this.delegate,"directUploadWillStoreFileWithXHR",u.xhr),u.create(f=>{f?t(f):t(null,i.toJSON())})}})})}};function es(s,t,...e){if(s&&typeof s[t]=="function")return s[t](...e)}var Le=class{constructor(t,e){this.input=t,this.file=e,this.directUpload=new At(this.file,this.url,this),this.dispatch("initialize")}start(t){let e=document.createElement("input");e.type="hidden",e.name=this.input.name,this.input.insertAdjacentElement("beforebegin",e),this.dispatch("start"),this.directUpload.create((n,i)=>{n?(e.parentNode.removeChild(e),this.dispatchError(n)):e.value=i.signed_id,this.dispatch("end"),t(n)})}uploadRequestDidProgress(t){let e=t.loaded/t.total*100;e&&this.dispatch("progress",{progress:e})}get url(){return this.input.getAttribute("data-direct-upload-url")}dispatch(t,e={}){return e.file=this.file,e.id=this.directUpload.id,rs(this.input,`direct-upload:${t}`,{detail:e})}dispatchError(t){this.dispatch("error",{error:t}).defaultPrevented||alert(t)}directUploadWillCreateBlobWithXHR(t){this.dispatch("before-blob-request",{xhr:t})}directUploadWillStoreFileWithXHR(t){this.dispatch("before-storage-request",{xhr:t}),t.upload.addEventListener("progress",e=>this.uploadRequestDidProgress(e))}},_n="input[type=file][data-direct-upload-url]:not([disabled])",Me=class{constructor(t){this.form=t,this.inputs=jn(t,_n).filter(e=>e.files.length)}start(t){let e=this.createDirectUploadControllers(),n=()=>{let i=e.shift();i?i.start(a=>{a?(t(a),this.dispatch("end")):n()}):(t(),this.dispatch("end"))};this.dispatch("start"),n()}createDirectUploadControllers(){let t=[];return this.inputs.forEach(e=>{os(e.files).forEach(n=>{let i=new Le(e,n);t.push(i)})}),t}dispatch(t,e={}){return rs(this.form,`direct-uploads:${t}`,{detail:e})}},Ce="data-direct-uploads-processing",Be=new WeakMap,ss=!1;function De(){ss||(ss=!0,document.addEventListener("click",Un,!0),document.addEventListener("submit",qn,!0),document.addEventListener("ajax:before",Kn))}function Un(s){let t=s.target.closest("button, input");t&&t.type==="submit"&&t.form&&Be.set(t.form,t)}function qn(s){as(s)}function Kn(s){s.target.tagName=="FORM"&&as(s)}function as(s){let t=s.target;if(t.hasAttribute(Ce)){s.preventDefault();return}let e=new Me(t),{inputs:n}=e;n.length&&(s.preventDefault(),t.setAttribute(Ce,""),n.forEach(Wn),e.start(i=>{t.removeAttribute(Ce),i?n.forEach(Hn):zn(t)}))}function zn(s){let t=Be.get(s)||is(s,"input[type=submit], button[type=submit]");if(t){let{disabled:e}=t;t.disabled=!1,t.focus(),t.click(),t.disabled=e}else t=document.createElement("input"),t.type="submit",t.style.display="none",s.appendChild(t),t.click(),s.removeChild(t);Be.delete(s)}function Wn(s){s.disabled=!0}function Hn(s){s.disabled=!1}function Xn(){window.ActiveStorage&&De()}setTimeout(Xn,1);var Ot=class extends O{connect(){this.hasInputTarget&&(this.inputTarget.disabled=!0)}copy(s){if(s.preventDefault(),!this.hasInputTarget)return;let t=this.inputTarget.innerHTML||this.inputTarget.value;navigator.clipboard.writeText(t)}};F(Ot,"targets",["input"]);var Tt=class extends O{toggle(s){s.preventDefault();let t=this.controlTarget;t.dataset.checked?(this.fieldTarget.value=!1,delete t.dataset.checked):(this.fieldTarget.value=!0,t.dataset.checked=!0)}};F(Tt,"targets",["field","control"]);var qt=class extends O{close(){this.element.classList.remove("lui:opacity-100"),this.element.classList.add("lui:opacity-0"),setTimeout(()=>{this.element.classList.add("lui:hidden")},300)}};var Ct=class extends O{openSidebar(){this.overlayTarget.dataset.open="",document.body.style.overflow="hidden"}closeSidebar(){delete this.overlayTarget.dataset.open,document.body.style.overflow=""}disconnect(){document.body.style.overflow=""}};F(Ct,"targets",["overlay"]);var Kt=class extends O{openModal(){this.findElement("lui-modal").open()}closeModal(){this.findElement("lui-modal").close()}findElement(s){let t=this.element.dataset.target.replace("#",""),e=document.getElementById(t);return this.application.getControllerForElementAndIdentifier(e,s)}};var lt=class extends O{connect(){this.openFirstValue&&this.openItem(this.itemTargets[0])}toggle(s){s.preventDefault(),this.itemTargets.forEach(t=>{t.contains(s.target)?this.isOpen(t)?this.closeItem(t):this.openItem(t):this.closeItem(t)})}openItem(s){let t=s.querySelector("[data-lui-accordion-target=content]");t.classList.remove("lui:grid-rows-[0fr]"),t.classList.add("lui:grid-rows-[1fr]"),t.classList.remove("lui:opacity-0"),t.classList.add("lui:opacity-100"),s.querySelector("[data-lui-accordion-target=arrow]").classList.add("lui:rotate-180")}closeItem(s){let t=s.querySelector("[data-lui-accordion-target=content]");t.classList.remove("lui:grid-rows-[1fr]"),t.classList.add("lui:grid-rows-[0fr]"),t.classList.remove("lui:opacity-100"),t.classList.add("lui:opacity-0"),s.querySelector("[data-lui-accordion-target=arrow]").classList.remove("lui:rotate-180")}isOpen(s){return s.querySelector("[data-lui-accordion-target=content]").classList.contains("lui:grid-rows-[1fr]")}};F(lt,"targets",["content","item"]),F(lt,"values",{openFirst:{type:Boolean,default:!0}});var ut=class extends O{connect(){this.dialogTarget.addEventListener("click",this.onClick.bind(this)),this.openValue&&this.open()}disconnect(){this.dialogTarget.removeEventListener("click",this.onClick.bind(this))}open(){this.dialogTarget.showModal()}close(){this.dialogTarget.setAttribute("closing",""),Promise.all(this.dialogTarget.getAnimations().map(s=>s.finished)).then(()=>{this.dialogTarget.removeAttribute("closing"),this.dialogTarget.close()})}onClick(s){s.target===this.dialogTarget&&this.dialogTarget.close()}submitForm(){this.dialogTarget.querySelector("form").requestSubmit()}};F(ut,"targets",["dialog"]),F(ut,"values",{open:Boolean});var ht=class extends O{connect(){this.initialShowValue||this.itemTargets.forEach(s=>{s.classList.add("hidden")})}toggle(s){s.preventDefault(),this.itemTargets.forEach(t=>{t.classList.toggle("hidden")})}};F(ht,"targets",["item"]),F(ht,"values",{initialShow:Boolean});var St=class extends O{toggle(s){s.preventDefault();let t=s.target;t.dataset.checked?(this.fieldTarget.value=!1,delete t.dataset.checked):(this.fieldTarget.value=!0,t.dataset.checked=!0)}};F(St,"targets",["field"]);var Ne=class extends O{};Ne.debounces=[];var $e=class extends O{};$e.throttles=[];var Yn={enterFromClass:"enter",enterActiveClass:"enterStart",enterToClass:"enterEnd",leaveFromClass:"leave",leaveActiveClass:"leaveStart",leaveToClass:"leaveEnd"},Qn={transitioned:!1,hiddenClass:"hidden",preserveOriginalClass:!0,removeToClasses:!0},zt=(s,t={})=>{var e,n,i;let a=s,u=a.element.dataset.transitionTarget,f;u&&(f=a[`${u}Target`]);let m=(t==null?void 0:t.element)||f||a.element;if(!(m instanceof HTMLElement||m instanceof SVGElement))return;let g=m.dataset,b=parseInt(g.leaveAfter||"")||t.leaveAfter||0,{transitioned:p,hiddenClass:w,preserveOriginalClass:v,removeToClasses:x}=Object.assign({},Qn,t),E=(e=a.enter)===null||e===void 0?void 0:e.bind(a),y=(n=a.leave)===null||n===void 0?void 0:n.bind(a),d=(i=a.toggleTransition)===null||i===void 0?void 0:i.bind(a);function h(A){return B(this,null,function*(){if(a.transitioned)return;a.transitioned=!0,E&&E(A);let S=et("enterFrom",t,g),L=et("enterActive",t,g),$=et("enterTo",t,g),D=et("leaveTo",t,g);w&&m.classList.remove(w),x||C(m,D),yield c(m,S,L,$,w,v,x),b>0&&setTimeout(()=>{o(A)},b)})}function o(A){return B(this,null,function*(){if(!a.transitioned)return;a.transitioned=!1,y&&y(A);let S=et("leaveFrom",t,g),L=et("leaveActive",t,g),$=et("leaveTo",t,g),D=et("enterTo",t,g);x||C(m,D),yield c(m,S,L,$,w,v,x),w&&m.classList.add(w)})}function r(A){d&&d(A),a.transitioned?o():h()}function c(A,S,L,$,D,W,P){return B(this,null,function*(){let N=[];W&&(S.forEach(M=>A.classList.contains(M)&&M!==D&&N.push(M)),L.forEach(M=>A.classList.contains(M)&&M!==D&&N.push(M)),$.forEach(M=>A.classList.contains(M)&&M!==D&&N.push(M))),T(A,S),C(A,N),T(A,L),yield Zn(),C(A,S),T(A,$),yield Gn(A),C(A,L),P&&C(A,$),T(A,N)})}function l(){a.transitioned=p,p?(w&&m.classList.remove(w),h()):(w&&m.classList.add(w),o())}function T(A,S){S.length>0&&A.classList.add(...S)}function C(A,S){S.length>0&&A.classList.remove(...S)}return l(),Object.assign(a,{enter:h,leave:o,toggleTransition:r}),[h,o,r]};function et(s,t,e){let n=`transition${s[0].toUpperCase()}${s.substr(1)}`,i=Yn[s],a=t[s]||e[n]||e[i]||" ";return ti(a)?[]:a.split(" ")}function Gn(s){return B(this,null,function*(){return new Promise(t=>{let e=Number(getComputedStyle(s).transitionDuration.split(",")[0].replace("s",""))*1e3;setTimeout(()=>{t(e)},e)})})}function Zn(){return B(this,null,function*(){return new Promise(s=>{requestAnimationFrame(()=>{requestAnimationFrame(s)})})})}function ti(s){return s.length===0||!s.trim()}var dt=class extends O{connect(){zt(this,{element:this.menuTarget,hiddenClass:"lui:hidden"})}toggle(){this.toggleTransition()}hide(t){!this.element.contains(t.target)&&!this.menuTarget.classList.contains("lui:hidden")&&this.leave()}};F(dt,"targets",["menu"]);var ke=class{constructor(t,e){this.controller=e,this.file=t,this.directUpload=new At(t,this.controller.inputTarget.dataset.directUploadUrl,this)}process(){this.insertUpload(),this.directUpload.create((t,e)=>{if(t){let i=this.controller.filesTarget.querySelector(`#upload_${this.directUpload.id}`).querySelector("[data-lui-dropzone-target='status']");i.textContent="Failed. "+t,i.classList.add("text-red-500")}else{let n=document.createElement("input");n.setAttribute("type","hidden"),n.setAttribute("value",e.signed_id),n.name=this.controller.inputTarget.name,this.controller.filesTarget.querySelector(`#upload_${this.directUpload.id}`).appendChild(n),this.controller.inputTarget.value=""}})}insertUpload(){let t=this.controller.templateTarget.content.cloneNode(!0);t.querySelector("#\\#NEW_FILE").id=`upload_${this.directUpload.id}`,t.querySelector("[data-lui-dropzone-target='filename']").textContent=this.file.name,t.querySelector("[data-lui-dropzone-target='status']").textContent="Uploading...",this.controller.filesTarget.appendChild(t)}directUploadWillStoreFileWithXHR(t){t.upload.addEventListener("progress",e=>this.updateProgress(e))}updateProgress(t){let e=(t.loaded/t.total*100).toFixed(0),n=e==100?"Uploaded":"Uploading...",i=this.controller.filesTarget.querySelector(`#upload_${this.directUpload.id}`);i.querySelector("[data-lui-dropzone-target='status']").textContent=n,i.querySelector("[data-lui-dropzone-target='progressbar']").style.width=`${e}%`,i.querySelector("[data-lui-dropzone-target='percentage-progress']").textContent=`${e}%`}},Ft=class extends O{selectFiles(s){this.inputTarget.click()}uploadFiles(s){s.preventDefault(),[...s.dataTransfer?s.dataTransfer.files:s.target.files].forEach(e=>new ke(e,this).process())}activate(s){s.preventDefault()}removeFile(s){s.preventDefault(),s.target.closest("[data-lui-dropzone-target='file']").remove()}};F(Ft,"targets",["input","template","files"]);var ft=class extends O{connect(){this.autodismissValue&&setTimeout(()=>{this.close()},this.dismissAfterValue),zt(this,{element:this.toastTarget,enterActive:"lui:transition lui:ease-in-out lui:duration-150",enterFrom:"lui:transform lui:opacity-0 lui:scale-95",enterTo:"lui:transform lui:opacity-100 lui:scale-100",leaveActive:"lui:transition lui:ease-in-out lui:duration-150",leaveFrom:"lui:transform lui:opacity-100 lui:scale-100",leaveTo:"lui:transform lui:opacity-0 lui:scale-95",hiddenClass:"lui:hidden",transitioned:!0})}close(){this.leave()}};F(ft,"targets",["toast"]),F(ft,"values",{autodismiss:Boolean,dismissAfter:Number});var X=Math.min,R=Math.max,Mt=Math.round,Bt=Math.floor,q=s=>({x:s,y:s}),ei={left:"right",right:"left",bottom:"top",top:"bottom"},si={start:"end",end:"start"};function Ht(s,t,e){return R(s,X(t,e))}function nt(s,t){return typeof s=="function"?s(t):s}function G(s){return s.split("-")[0]}function it(s){return s.split("-")[1]}function Pe(s){return s==="x"?"y":"x"}function Xt(s){return s==="y"?"height":"width"}var ni=new Set(["top","bottom"]);function J(s){return ni.has(G(s))?"y":"x"}function Jt(s){return Pe(J(s))}function us(s,t,e){e===void 0&&(e=!1);let n=it(s),i=Jt(s),a=Xt(i),u=i==="x"?n===(e?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(u=Lt(u)),[u,Lt(u)]}function hs(s){let t=Lt(s);return[Wt(s),t,Wt(t)]}function Wt(s){return s.replace(/start|end/g,t=>si[t])}var cs=["left","right"],ls=["right","left"],ii=["top","bottom"],ri=["bottom","top"];function oi(s,t,e){switch(s){case"top":case"bottom":return e?t?ls:cs:t?cs:ls;case"left":case"right":return t?ii:ri;default:return[]}}function ds(s,t,e,n){let i=it(s),a=oi(G(s),e==="start",n);return i&&(a=a.map(u=>u+"-"+i),t&&(a=a.concat(a.map(Wt)))),a}function Lt(s){return s.replace(/left|right|bottom|top/g,t=>ei[t])}function ai(s){return k({top:0,right:0,bottom:0,left:0},s)}function Re(s){return typeof s!="number"?ai(s):{top:s,right:s,bottom:s,left:s}}function rt(s){let{x:t,y:e,width:n,height:i}=s;return{width:n,height:i,top:e,left:t,right:t+n,bottom:e+i,x:t,y:e}}function fs(s,t,e){let{reference:n,floating:i}=s,a=J(t),u=Jt(t),f=Xt(u),m=G(t),g=a==="y",b=n.x+n.width/2-i.width/2,p=n.y+n.height/2-i.height/2,w=n[f]/2-i[f]/2,v;switch(m){case"top":v={x:b,y:n.y-i.height};break;case"bottom":v={x:b,y:n.y+n.height};break;case"right":v={x:n.x+n.width,y:p};break;case"left":v={x:n.x-i.width,y:p};break;default:v={x:n.x,y:n.y}}switch(it(t)){case"start":v[u]-=w*(e&&g?-1:1);break;case"end":v[u]+=w*(e&&g?-1:1);break}return v}var ms=(s,t,e)=>B(void 0,null,function*(){let{placement:n="bottom",strategy:i="absolute",middleware:a=[],platform:u}=e,f=a.filter(Boolean),m=yield u.isRTL==null?void 0:u.isRTL(t),g=yield u.getElementRects({reference:s,floating:t,strategy:i}),{x:b,y:p}=fs(g,n,m),w=n,v={},x=0;for(let E=0;E<f.length;E++){let{name:y,fn:d}=f[E],{x:h,y:o,data:r,reset:c}=yield d({x:b,y:p,initialPlacement:n,placement:w,strategy:i,middlewareData:v,rects:g,platform:u,elements:{reference:s,floating:t}});b=h!=null?h:b,p=o!=null?o:p,v=H(k({},v),{[y]:k(k({},v[y]),r)}),c&&x<=50&&(x++,typeof c=="object"&&(c.placement&&(w=c.placement),c.rects&&(g=c.rects===!0?yield u.getElementRects({reference:s,floating:t,strategy:i}):c.rects),{x:b,y:p}=fs(g,w,m)),E=-1)}return{x:b,y:p,placement:w,strategy:i,middlewareData:v}});function Yt(s,t){return B(this,null,function*(){var e;t===void 0&&(t={});let{x:n,y:i,platform:a,rects:u,elements:f,strategy:m}=s,{boundary:g="clippingAncestors",rootBoundary:b="viewport",elementContext:p="floating",altBoundary:w=!1,padding:v=0}=nt(t,s),x=Re(v),y=f[w?p==="floating"?"reference":"floating":p],d=rt(yield a.getClippingRect({element:(e=yield a.isElement==null?void 0:a.isElement(y))==null||e?y:y.contextElement||(yield a.getDocumentElement==null?void 0:a.getDocumentElement(f.floating)),boundary:g,rootBoundary:b,strategy:m})),h=p==="floating"?{x:n,y:i,width:u.floating.width,height:u.floating.height}:u.reference,o=yield a.getOffsetParent==null?void 0:a.getOffsetParent(f.floating),r=(yield a.isElement==null?void 0:a.isElement(o))?(yield a.getScale==null?void 0:a.getScale(o))||{x:1,y:1}:{x:1,y:1},c=rt(a.convertOffsetParentRelativeRectToViewportRelativeRect?yield a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:f,rect:h,offsetParent:o,strategy:m}):h);return{top:(d.top-c.top+x.top)/r.y,bottom:(c.bottom-d.bottom+x.bottom)/r.y,left:(d.left-c.left+x.left)/r.x,right:(c.right-d.right+x.right)/r.x}})}var gs=s=>({name:"arrow",options:s,fn(e){return B(this,null,function*(){let{x:n,y:i,placement:a,rects:u,platform:f,elements:m,middlewareData:g}=e,{element:b,padding:p=0}=nt(s,e)||{};if(b==null)return{};let w=Re(p),v={x:n,y:i},x=Jt(a),E=Xt(x),y=yield f.getDimensions(b),d=x==="y",h=d?"top":"left",o=d?"bottom":"right",r=d?"clientHeight":"clientWidth",c=u.reference[E]+u.reference[x]-v[x]-u.floating[E],l=v[x]-u.reference[x],T=yield f.getOffsetParent==null?void 0:f.getOffsetParent(b),C=T?T[r]:0;(!C||!(yield f.isElement==null?void 0:f.isElement(T)))&&(C=m.floating[r]||u.floating[E]);let A=c/2-l/2,S=C/2-y[E]/2-1,L=X(w[h],S),$=X(w[o],S),D=L,W=C-y[E]-$,P=C/2-y[E]/2+A,N=Ht(D,P,W),M=!g.arrow&&it(a)!=null&&P!==N&&u.reference[E]/2-(P<D?L:$)-y[E]/2<0,Y=M?P<D?P-D:P-W:0;return{[x]:v[x]+Y,data:k({[x]:N,centerOffset:P-N-Y},M&&{alignmentOffset:Y}),reset:M}})}});var ps=function(s){return s===void 0&&(s={}),{name:"flip",options:s,fn(e){return B(this,null,function*(){var n,i;let{placement:a,middlewareData:u,rects:f,initialPlacement:m,platform:g,elements:b}=e,P=nt(s,e),{mainAxis:p=!0,crossAxis:w=!0,fallbackPlacements:v,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:E="none",flipAlignment:y=!0}=P,d=kt(P,["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"]);if((n=u.arrow)!=null&&n.alignmentOffset)return{};let h=G(a),o=J(m),r=G(m)===m,c=yield g.isRTL==null?void 0:g.isRTL(b.floating),l=v||(r||!y?[Lt(m)]:hs(m)),T=E!=="none";!v&&T&&l.push(...ds(m,y,E,c));let C=[m,...l],A=yield Yt(e,d),S=[],L=((i=u.flip)==null?void 0:i.overflows)||[];if(p&&S.push(A[h]),w){let N=us(a,f,c);S.push(A[N[0]],A[N[1]])}if(L=[...L,{placement:a,overflows:S}],!S.every(N=>N<=0)){var $,D;let N=((($=u.flip)==null?void 0:$.index)||0)+1,M=C[N];if(M&&(!(w==="alignment"?o!==J(M):!1)||L.every(U=>J(U.placement)===o?U.overflows[0]>0:!0)))return{data:{index:N,overflows:L},reset:{placement:M}};let Y=(D=L.filter(st=>st.overflows[0]<=0).sort((st,U)=>st.overflows[1]-U.overflows[1])[0])==null?void 0:D.placement;if(!Y)switch(x){case"bestFit":{var W;let st=(W=L.filter(U=>{if(T){let tt=J(U.placement);return tt===o||tt==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(tt=>tt>0).reduce((tt,Us)=>tt+Us,0)]).sort((U,tt)=>U[1]-tt[1])[0])==null?void 0:W[0];st&&(Y=st);break}case"initialPlacement":Y=m;break}if(a!==Y)return{reset:{placement:Y}}}return{}})}}};var ci=new Set(["left","top"]);function li(s,t){return B(this,null,function*(){let{placement:e,platform:n,elements:i}=s,a=yield n.isRTL==null?void 0:n.isRTL(i.floating),u=G(e),f=it(e),m=J(e)==="y",g=ci.has(u)?-1:1,b=a&&m?-1:1,p=nt(t,s),{mainAxis:w,crossAxis:v,alignmentAxis:x}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return f&&typeof x=="number"&&(v=f==="end"?x*-1:x),m?{x:v*b,y:w*g}:{x:w*g,y:v*b}})}var bs=function(s){return s===void 0&&(s=0),{name:"offset",options:s,fn(e){return B(this,null,function*(){var n,i;let{x:a,y:u,placement:f,middlewareData:m}=e,g=yield li(e,s);return f===((n=m.offset)==null?void 0:n.placement)&&(i=m.arrow)!=null&&i.alignmentOffset?{}:{x:a+g.x,y:u+g.y,data:H(k({},g),{placement:f})}})}}},vs=function(s){return s===void 0&&(s={}),{name:"shift",options:s,fn(e){return B(this,null,function*(){let{x:n,y:i,placement:a}=e,d=nt(s,e),{mainAxis:u=!0,crossAxis:f=!1,limiter:m={fn:h=>{let{x:o,y:r}=h;return{x:o,y:r}}}}=d,g=kt(d,["mainAxis","crossAxis","limiter"]),b={x:n,y:i},p=yield Yt(e,g),w=J(G(a)),v=Pe(w),x=b[v],E=b[w];if(u){let h=v==="y"?"top":"left",o=v==="y"?"bottom":"right",r=x+p[h],c=x-p[o];x=Ht(r,x,c)}if(f){let h=w==="y"?"top":"left",o=w==="y"?"bottom":"right",r=E+p[h],c=E-p[o];E=Ht(r,E,c)}let y=m.fn(H(k({},e),{[v]:x,[w]:E}));return H(k({},y),{data:{x:y.x-n,y:y.y-i,enabled:{[v]:u,[w]:f}}})})}}};var ys=function(s){return s===void 0&&(s={}),{name:"size",options:s,fn(e){return B(this,null,function*(){var n,i;let{placement:a,rects:u,platform:f,elements:m}=e,L=nt(s,e),{apply:g=()=>{}}=L,b=kt(L,["apply"]),p=yield Yt(e,b),w=G(a),v=it(a),x=J(a)==="y",{width:E,height:y}=u.floating,d,h;w==="top"||w==="bottom"?(d=w,h=v===((yield f.isRTL==null?void 0:f.isRTL(m.floating))?"start":"end")?"left":"right"):(h=w,d=v==="end"?"top":"bottom");let o=y-p.top-p.bottom,r=E-p.left-p.right,c=X(y-p[d],o),l=X(E-p[h],r),T=!e.middlewareData.shift,C=c,A=l;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(A=r),(i=e.middlewareData.shift)!=null&&i.enabled.y&&(C=o),T&&!v){let $=R(p.left,0),D=R(p.right,0),W=R(p.top,0),P=R(p.bottom,0);x?A=E-2*($!==0||D!==0?$+D:R(p.left,p.right)):C=y-2*(W!==0||P!==0?W+P:R(p.top,p.bottom))}yield g(H(k({},e),{availableWidth:A,availableHeight:C}));let S=yield f.getDimensions(m.floating);return E!==S.width||y!==S.height?{reset:{rects:!0}}:{}})}}};function Qt(){return typeof window!="undefined"}function ot(s){return xs(s)?(s.nodeName||"").toLowerCase():"#document"}function V(s){var t;return(s==null||(t=s.ownerDocument)==null?void 0:t.defaultView)||window}function K(s){var t;return(t=(xs(s)?s.ownerDocument:s.document)||window.document)==null?void 0:t.documentElement}function xs(s){return Qt()?s instanceof Node||s instanceof V(s).Node:!1}function I(s){return Qt()?s instanceof Element||s instanceof V(s).Element:!1}function z(s){return Qt()?s instanceof HTMLElement||s instanceof V(s).HTMLElement:!1}function ws(s){return!Qt()||typeof ShadowRoot=="undefined"?!1:s instanceof ShadowRoot||s instanceof V(s).ShadowRoot}var ui=new Set(["inline","contents"]);function gt(s){let{overflow:t,overflowX:e,overflowY:n,display:i}=_(s);return/auto|scroll|overlay|hidden|clip/.test(t+n+e)&&!ui.has(i)}var hi=new Set(["table","td","th"]);function Es(s){return hi.has(ot(s))}var di=[":popover-open",":modal"];function Dt(s){return di.some(t=>{try{return s.matches(t)}catch(e){return!1}})}var fi=["transform","translate","scale","rotate","perspective"],mi=["transform","translate","scale","rotate","perspective","filter"],gi=["paint","layout","strict","content"];function Gt(s){let t=Zt(),e=I(s)?_(s):s;return fi.some(n=>e[n]?e[n]!=="none":!1)||(e.containerType?e.containerType!=="normal":!1)||!t&&(e.backdropFilter?e.backdropFilter!=="none":!1)||!t&&(e.filter?e.filter!=="none":!1)||mi.some(n=>(e.willChange||"").includes(n))||gi.some(n=>(e.contain||"").includes(n))}function As(s){let t=Z(s);for(;z(t)&&!at(t);){if(Gt(t))return t;if(Dt(t))return null;t=Z(t)}return null}function Zt(){return typeof CSS=="undefined"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}var pi=new Set(["html","body","#document"]);function at(s){return pi.has(ot(s))}function _(s){return V(s).getComputedStyle(s)}function Nt(s){return I(s)?{scrollLeft:s.scrollLeft,scrollTop:s.scrollTop}:{scrollLeft:s.scrollX,scrollTop:s.scrollY}}function Z(s){if(ot(s)==="html")return s;let t=s.assignedSlot||s.parentNode||ws(s)&&s.host||K(s);return ws(t)?t.host:t}function Os(s){let t=Z(s);return at(t)?s.ownerDocument?s.ownerDocument.body:s.body:z(t)&&gt(t)?t:Os(t)}function mt(s,t,e){var n;t===void 0&&(t=[]),e===void 0&&(e=!0);let i=Os(s),a=i===((n=s.ownerDocument)==null?void 0:n.body),u=V(i);if(a){let f=te(u);return t.concat(u,u.visualViewport||[],gt(i)?i:[],f&&e?mt(f):[])}return t.concat(i,mt(i,[],e))}function te(s){return s.parent&&Object.getPrototypeOf(s.parent)?s.frameElement:null}function Fs(s){let t=_(s),e=parseFloat(t.width)||0,n=parseFloat(t.height)||0,i=z(s),a=i?s.offsetWidth:e,u=i?s.offsetHeight:n,f=Mt(e)!==a||Mt(n)!==u;return f&&(e=a,n=u),{width:e,height:n,$:f}}function je(s){return I(s)?s:s.contextElement}function pt(s){let t=je(s);if(!z(t))return q(1);let e=t.getBoundingClientRect(),{width:n,height:i,$:a}=Fs(t),u=(a?Mt(e.width):e.width)/n,f=(a?Mt(e.height):e.height)/i;return(!u||!Number.isFinite(u))&&(u=1),(!f||!Number.isFinite(f))&&(f=1),{x:u,y:f}}var bi=q(0);function Ls(s){let t=V(s);return!Zt()||!t.visualViewport?bi:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function vi(s,t,e){return t===void 0&&(t=!1),!e||t&&e!==V(s)?!1:t}function ct(s,t,e,n){t===void 0&&(t=!1),e===void 0&&(e=!1);let i=s.getBoundingClientRect(),a=je(s),u=q(1);t&&(n?I(n)&&(u=pt(n)):u=pt(s));let f=vi(a,e,n)?Ls(a):q(0),m=(i.left+f.x)/u.x,g=(i.top+f.y)/u.y,b=i.width/u.x,p=i.height/u.y;if(a){let w=V(a),v=n&&I(n)?V(n):n,x=w,E=te(x);for(;E&&n&&v!==x;){let y=pt(E),d=E.getBoundingClientRect(),h=_(E),o=d.left+(E.clientLeft+parseFloat(h.paddingLeft))*y.x,r=d.top+(E.clientTop+parseFloat(h.paddingTop))*y.y;m*=y.x,g*=y.y,b*=y.x,p*=y.y,m+=o,g+=r,x=V(E),E=te(x)}}return rt({width:b,height:p,x:m,y:g})}function ee(s,t){let e=Nt(s).scrollLeft;return t?t.left+e:ct(K(s)).left+e}function Ms(s,t){let e=s.getBoundingClientRect(),n=e.left+t.scrollLeft-ee(s,e),i=e.top+t.scrollTop;return{x:n,y:i}}function yi(s){let{elements:t,rect:e,offsetParent:n,strategy:i}=s,a=i==="fixed",u=K(n),f=t?Dt(t.floating):!1;if(n===u||f&&a)return e;let m={scrollLeft:0,scrollTop:0},g=q(1),b=q(0),p=z(n);if((p||!p&&!a)&&((ot(n)!=="body"||gt(u))&&(m=Nt(n)),z(n))){let v=ct(n);g=pt(n),b.x=v.x+n.clientLeft,b.y=v.y+n.clientTop}let w=u&&!p&&!a?Ms(u,m):q(0);return{width:e.width*g.x,height:e.height*g.y,x:e.x*g.x-m.scrollLeft*g.x+b.x+w.x,y:e.y*g.y-m.scrollTop*g.y+b.y+w.y}}function wi(s){return Array.from(s.getClientRects())}function xi(s){let t=K(s),e=Nt(s),n=s.ownerDocument.body,i=R(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),a=R(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight),u=-e.scrollLeft+ee(s),f=-e.scrollTop;return _(n).direction==="rtl"&&(u+=R(t.clientWidth,n.clientWidth)-i),{width:i,height:a,x:u,y:f}}var Ts=25;function Ei(s,t){let e=V(s),n=K(s),i=e.visualViewport,a=n.clientWidth,u=n.clientHeight,f=0,m=0;if(i){a=i.width,u=i.height;let b=Zt();(!b||b&&t==="fixed")&&(f=i.offsetLeft,m=i.offsetTop)}let g=ee(n);if(g<=0){let b=n.ownerDocument,p=b.body,w=getComputedStyle(p),v=b.compatMode==="CSS1Compat"&&parseFloat(w.marginLeft)+parseFloat(w.marginRight)||0,x=Math.abs(n.clientWidth-p.clientWidth-v);x<=Ts&&(a-=x)}else g<=Ts&&(a+=g);return{width:a,height:u,x:f,y:m}}var Ai=new Set(["absolute","fixed"]);function Oi(s,t){let e=ct(s,!0,t==="fixed"),n=e.top+s.clientTop,i=e.left+s.clientLeft,a=z(s)?pt(s):q(1),u=s.clientWidth*a.x,f=s.clientHeight*a.y,m=i*a.x,g=n*a.y;return{width:u,height:f,x:m,y:g}}function Cs(s,t,e){let n;if(t==="viewport")n=Ei(s,e);else if(t==="document")n=xi(K(s));else if(I(t))n=Oi(t,e);else{let i=Ls(s);n={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return rt(n)}function Bs(s,t){let e=Z(s);return e===t||!I(e)||at(e)?!1:_(e).position==="fixed"||Bs(e,t)}function Ti(s,t){let e=t.get(s);if(e)return e;let n=mt(s,[],!1).filter(f=>I(f)&&ot(f)!=="body"),i=null,a=_(s).position==="fixed",u=a?Z(s):s;for(;I(u)&&!at(u);){let f=_(u),m=Gt(u);!m&&f.position==="fixed"&&(i=null),(a?!m&&!i:!m&&f.position==="static"&&!!i&&Ai.has(i.position)||gt(u)&&!m&&Bs(s,u))?n=n.filter(b=>b!==u):i=f,u=Z(u)}return t.set(s,n),n}function Ci(s){let{element:t,boundary:e,rootBoundary:n,strategy:i}=s,u=[...e==="clippingAncestors"?Dt(t)?[]:Ti(t,this._c):[].concat(e),n],f=u[0],m=u.reduce((g,b)=>{let p=Cs(t,b,i);return g.top=R(p.top,g.top),g.right=X(p.right,g.right),g.bottom=X(p.bottom,g.bottom),g.left=R(p.left,g.left),g},Cs(t,f,i));return{width:m.right-m.left,height:m.bottom-m.top,x:m.left,y:m.top}}function Si(s){let{width:t,height:e}=Fs(s);return{width:t,height:e}}function Fi(s,t,e){let n=z(t),i=K(t),a=e==="fixed",u=ct(s,!0,a,t),f={scrollLeft:0,scrollTop:0},m=q(0);function g(){m.x=ee(i)}if(n||!n&&!a)if((ot(t)!=="body"||gt(i))&&(f=Nt(t)),n){let v=ct(t,!0,a,t);m.x=v.x+t.clientLeft,m.y=v.y+t.clientTop}else i&&g();a&&!n&&i&&g();let b=i&&!n&&!a?Ms(i,f):q(0),p=u.left+f.scrollLeft-m.x-b.x,w=u.top+f.scrollTop-m.y-b.y;return{x:p,y:w,width:u.width,height:u.height}}function Ve(s){return _(s).position==="static"}function Ss(s,t){if(!z(s)||_(s).position==="fixed")return null;if(t)return t(s);let e=s.offsetParent;return K(s)===e&&(e=e.ownerDocument.body),e}function Ds(s,t){let e=V(s);if(Dt(s))return e;if(!z(s)){let i=Z(s);for(;i&&!at(i);){if(I(i)&&!Ve(i))return i;i=Z(i)}return e}let n=Ss(s,t);for(;n&&Es(n)&&Ve(n);)n=Ss(n,t);return n&&at(n)&&Ve(n)&&!Gt(n)?e:n||As(s)||e}var Li=function(s){return B(this,null,function*(){let t=this.getOffsetParent||Ds,e=this.getDimensions,n=yield e(s.floating);return{reference:Fi(s.reference,yield t(s.floating),s.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}})};function Mi(s){return _(s).direction==="rtl"}var Bi={convertOffsetParentRelativeRectToViewportRelativeRect:yi,getDocumentElement:K,getClippingRect:Ci,getOffsetParent:Ds,getElementRects:Li,getClientRects:wi,getDimensions:Si,getScale:pt,isElement:I,isRTL:Mi};function Ns(s,t){return s.x===t.x&&s.y===t.y&&s.width===t.width&&s.height===t.height}function Di(s,t){let e=null,n,i=K(s);function a(){var f;clearTimeout(n),(f=e)==null||f.disconnect(),e=null}function u(f,m){f===void 0&&(f=!1),m===void 0&&(m=1),a();let g=s.getBoundingClientRect(),{left:b,top:p,width:w,height:v}=g;if(f||t(),!w||!v)return;let x=Bt(p),E=Bt(i.clientWidth-(b+w)),y=Bt(i.clientHeight-(p+v)),d=Bt(b),o={rootMargin:-x+"px "+-E+"px "+-y+"px "+-d+"px",threshold:R(0,X(1,m))||1},r=!0;function c(l){let T=l[0].intersectionRatio;if(T!==m){if(!r)return u();T?u(!1,T):n=setTimeout(()=>{u(!1,1e-7)},1e3)}T===1&&!Ns(g,s.getBoundingClientRect())&&u(),r=!1}try{e=new IntersectionObserver(c,H(k({},o),{root:i.ownerDocument}))}catch(l){e=new IntersectionObserver(c,o)}e.observe(s)}return u(!0),a}function $s(s,t,e,n){n===void 0&&(n={});let{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:u=typeof ResizeObserver=="function",layoutShift:f=typeof IntersectionObserver=="function",animationFrame:m=!1}=n,g=je(s),b=i||a?[...g?mt(g):[],...mt(t)]:[];b.forEach(d=>{i&&d.addEventListener("scroll",e,{passive:!0}),a&&d.addEventListener("resize",e)});let p=g&&f?Di(g,e):null,w=-1,v=null;u&&(v=new ResizeObserver(d=>{let[h]=d;h&&h.target===g&&v&&(v.unobserve(t),cancelAnimationFrame(w),w=requestAnimationFrame(()=>{var o;(o=v)==null||o.observe(t)})),e()}),g&&!m&&v.observe(g),v.observe(t));let x,E=m?ct(s):null;m&&y();function y(){let d=ct(s);E&&!Ns(E,d)&&e(),E=d,x=requestAnimationFrame(y)}return e(),()=>{var d;b.forEach(h=>{i&&h.removeEventListener("scroll",e),a&&h.removeEventListener("resize",e)}),p==null||p(),(d=v)==null||d.disconnect(),v=null,m&&cancelAnimationFrame(x)}}var ks=bs;var Ps=vs,Rs=ps,Vs=ys;var js=gs;var Is=(s,t,e)=>{let n=new Map,i=k({platform:Bi},e),a=H(k({},i.platform),{_c:n});return ms(s,t,H(k({},i),{platform:a}))};var bt=class extends O{connect(){this.showTimeout=null,this.hideTimeout=null,this.cleanup=null,this.handleKeydown=this.handleKeydown.bind(this),"ontouchstart"in window&&this.element.addEventListener("click",this.toggle.bind(this))}disconnect(){this.hide(),this.clearTimeouts(),"ontouchstart"in window&&this.element.removeEventListener("click",this.toggle.bind(this))}show(s){!this.activeValue||(this.hideOtherTooltips(),this.clearTimeouts(),this.delayValue>0?this.showTimeout=setTimeout(()=>this.createTooltip(s),this.delayValue):this.createTooltip(s))}hide(){this.clearTimeouts(),this.delayValue>0?this.hideTimeout=setTimeout(()=>this.destroyTooltip(),this.delayValue):this.destroyTooltip()}toggle(s){this.tooltip?this.hide():this.show(s)}createTooltip(s){if(this.tooltip)return;let t=(s==null?void 0:s.currentTarget)||this.element;try{let e=document.createElement("div");e.innerHTML=this.templateTarget.innerHTML,e.style.position="absolute",e.style.zIndex="9999",e.setAttribute("role","tooltip"),e.setAttribute("data-lui-tooltip-instance","true"),document.body.appendChild(e),this.tooltip=e;let n=e.firstElementChild,i=n==null?void 0:n.querySelector("[data-tooltip-arrow]");n&&(this.cleanup=$s(t,n,()=>this.updatePosition(t,n,i)),requestAnimationFrame(()=>{n.style.opacity="1"}),document.addEventListener("keydown",this.handleKeydown))}catch(e){console.warn("Tooltip positioning failed:",e),this.destroyTooltip()}}destroyTooltip(){if(this.cleanup&&(this.cleanup(),this.cleanup=null),this.tooltip){let s=this.tooltip.firstElementChild;s?(s.style.opacity="0",setTimeout(()=>{this.tooltip&&(this.tooltip.remove(),this.tooltip=null)},200)):(this.tooltip.remove(),this.tooltip=null)}document.removeEventListener("keydown",this.handleKeydown)}updatePosition(s,t,e){!t||Is(s,t,{placement:this.positionValue||"bottom",middleware:[ks(this.offsetValue),Vs(),Rs(),Ps({padding:5}),...e?[js({element:e})]:[]]}).then(({x:n,y:i,placement:a,middlewareData:u})=>{Object.assign(t.style,{left:`${n}px`,top:`${i}px`}),e&&u.arrow&&this.positionArrow(e,a,u.arrow)}).catch(n=>{console.warn("Tooltip positioning update failed:",n)})}positionArrow(s,t,e){let{x:n,y:i}=e,a=t.split("-")[0];Object.assign(s.style,{left:"",top:"",right:"",bottom:""});let u="-4px";switch(a){case"top":Object.assign(s.style,{left:n!=null?`${n}px`:"",bottom:u});break;case"bottom":Object.assign(s.style,{left:n!=null?`${n}px`:"",top:u});break;case"left":Object.assign(s.style,{top:i!=null?`${i}px`:"",right:u});break;case"right":Object.assign(s.style,{top:i!=null?`${i}px`:"",left:u});break}}handleKeydown(s){s.key==="Escape"&&this.tooltip&&this.hide()}hideOtherTooltips(){document.querySelectorAll('[data-lui-tooltip-instance="true"]').forEach(s=>{s!==this.tooltip&&s.remove()})}clearTimeouts(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=null),this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null)}};F(bt,"targets",["template"]),F(bt,"values",{active:Boolean,position:String,delay:{type:Number,default:0},offset:{type:Number,default:8}});var j="lui";De();var _s=_t.start();window.Stimulus=_s;function Ni(s){s.register(`${j}-clipboard`,Ot),s.register(`${j}-checkbox`,Tt),s.register(`${j}-banner`,qt),s.register(`${j}-layout`,Ct),s.register(`${j}-main`,Kt),s.register(`${j}-accordion`,lt),s.register(`${j}-modal`,ut),s.register(`${j}-reveal`,ht),s.register(`${j}-switch`,St),s.register(`${j}-dropdown`,dt),s.register(`${j}-dropzone`,Ft),s.register(`${j}-toast`,ft),s.register(`${j}-tooltip`,bt)}Ni(_s);})();
